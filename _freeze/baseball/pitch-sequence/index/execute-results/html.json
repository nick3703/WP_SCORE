{
  "hash": "062b264d6b690bfbf6e4ca6207da3f77",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"An Exploration of Pitch Sequencing in Baseball\"\nauthor: \"Max Felter, Matt Toner, and Rachel Gidaro\"\ndate: \"2025-08-19\"\ndescription: Assessing pitch sequence through Transition Matrices\neditor: \n  canonical: true\ncategories:\n  - Transition Matrices\n  - Expectancy Matrics\n  - Logistic Regression\n---\n\n\n\n\n# Introduction\n\nEvery time a pitcher winds up to throw and a batter steps up to the plate, a multitude of factors are taken into account as they decide what pitch to throw and whether or not to swing. The primary aim of the pitcher is to get the batter out. As the pitcher aims to strike out the batter, they make elemental decisions about what type of pitch to throw and where to throw it. At the time of pitch, the pitcher has obviously made their decision, however, the batter faces a different scenario. Due to the extreme speeds of the pitch, there is little time to react. Many claim that mathematically, it should be nearly impossible for humans to react to and hit an MLB pitch (<https://www.smartnonsense.com/post/baseball>). We know, however, that these pitches are hit often and well. Ultimately, the batter is put in a position in which they have to predict the pitch that the pitcher is throwing. This becomes an information game. The batter will have some information from factors such as the windup, but they will also know what pitches have been thrown in the past. All this is to say: both the pitcher and batter are trying to get into the mind of the other, predicting their next move. This would imply that the sequence of pitches that the pitcher employs should play a significant role in their success. If a pitcher threw only one type of pitch or one sequence of pitches, batters would surely catch on and modify their reaction to account for it. Pitch sequencing describes the order of pitches by type, that a pitcher decides to throw during an at-bat. For example, a pitch sequence may be a four seam fastball, a curbevall, then a slider, and finally a two seam fastball.\n\nPitch sequencing is important since it can increase uncertainty in the batter and help systematically deceive them. For example, a pitcher may utilize a change up after a fastball, as it uses the same arm motion but travels much slower. This slower ball speed can interfere with the batter's timing and cause an early swing if they were expecting a fast ball. This intuitive proposition that pitch sequencing might play a central role in effective pitching can be validated using the extensive baseball data that exists today. The analysis we will walk you through in this project will help us answer the following research question:\n\n-   Does pitch sequencing matter in the MLB?\n\n-   If it does, what are the most effective sequences and why might that be?\n\nAfter conducting this analysis, you will be equipped to bring data driven decisions to your dugout, arguing for the best next-pitch type decision based on those thrown previously.\n\n::: {.callout-note collapse=\"true\" title=\"Learning Objectives\" appearance=\"minimal\"}\nBy the end of this activity, you will be able to:\n\n1.  Manipulate data.\n\n2.  Create a heat map for data visualization.\n\n3.  Understand the utility of transition and expectancy matrices\n\n4.  Build and interpret a logistic regression model.\n:::\n\n::: {.callout-note collapse=\"true\" title=\"Activity Length\" appearance=\"minimal\"}\nThis activity would be suitable for an in class example or homework assignment. This activity could take between 30 to 45 minutes depending on the students familiarity with R.\n:::\n\n::: {.callout-note collapse=\"true\" title=\"Methods\" appearance=\"minimal\"}\nTo successfully complete this module, students should have prior knowledge of the following statistical concepts:\n\n-   Familiarity with the tidyverse.\n\n**Technology Requirement:**\n\n-   This activity is built for students with a basic understanding of R.\n:::\n\n::: {.callout-note collapse=\"true\" title=\"Data Overview\" appearance=\"minimal\"}\nPITCHf/x is a pitch tracking system installed in all MLB stadiums that effectively measures pitch metrics such as location of the ball as it passes the plate, pitch type, and release speed. PITCHf/x also includes other data relevant to each at-bat such as the batter, the pitcher, the outcome, and the count at the time of pitch. The PITCHf/x entity releases its data online for open use, though it is quite large due to the shear number of pitches in each season. Due to the size, we will produce our analysis using only pitches of the most recent MLB season, 2024. Also due to the size of the dataset we could not include all of the variables. The subset we will use includes:\n\n| Variable | Description |\n|------------------------------------|------------------------------------|\n| game_date | Date of the Game |\n| game_pk | Pre-pitch number of outs |\n| at_bat_number | Plate appearance number of the game |\n| inning_topbot | Pre-pitch top or bottom of inning |\n| inning | Pre-pitch inning number |\n| batter | MLB Player Id tied to the play event |\n| pitch_number | Total pitch number of the plate appearance |\n| balls | Pre-pitch number of balls in count |\n| strikes | Pre-pitch number of strikes in count |\n| outs_when_up | Pre-pitch number of outs |\n| description | Description of the resulting pitch |\n| pitch_type | The type of pitch derived from Statcast |\n| player_name | Player's name tied to the event of the search. |\n| pitcher | MLB Player Id tied to the play event |\n| events | Event of the resulting Plate Appearance |\n| plate_x | Horizontal position of the ball when it crosses home plate from the catcher's perspective |\n| plate_z | Vertical position of the ball when it crosses home plate from the catcher's perspective |\n| home_team | Abbreviation of home team |\n| away_team | Abbreviation of away team |\n\nFor more information about the variables and the variables that statcast offers, please visit (<https://baseballsavant.mlb.com/csv-docs>)\n:::\n\n# Displaying Data in a Table\n\nThe first thing we will do is load in the data and necessary packages. The data can be downloaded <a href=\"pitch_subset.csv\" download=\"pitch_subset.csv\">here</a>. We will include all pitches that occurred in the 2024 MLB season, roughly 700,000 in total:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(knitr)\nlibrary(broom)\nlibrary(baseballr)\nlibrary(dplyr)\nlibrary(mgcv)\nlibrary(broom)\nlibrary(gt)\n\npitches <- read_csv(\"pitch_subset.csv\")\n```\n:::\n\n\n\n\nIn order to understand what all is contained in the dataset we can run the \"dim\" function.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndim(pitches)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 705728     19\n```\n\n\n:::\n:::\n\n\n\n\nAs we can see, there are **705,728 observations**. In the code below, we used the select function to isolate the variables we wanted to investigate (pitch_type, game_date, player_name, balls, and strikes). We then only want to look at the first 10 observations, so we run head(10). Lastly in order for the output to be formatted nicely, we run gt() and set a table header.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npitches %>% select(pitch_type, game_date, player_name, balls, strikes) %>% \n                   head(10) %>% \n                     gt() %>%\n  tab_header(\"A selected sample of the PITCHf/x data\",\n             \"Note: This is not all of the important columns, just a view for demonstration purposes.\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"gnddhugimr\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#gnddhugimr table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#gnddhugimr thead, #gnddhugimr tbody, #gnddhugimr tfoot, #gnddhugimr tr, #gnddhugimr td, #gnddhugimr th {\n  border-style: none;\n}\n\n#gnddhugimr p {\n  margin: 0;\n  padding: 0;\n}\n\n#gnddhugimr .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#gnddhugimr .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#gnddhugimr .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#gnddhugimr .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#gnddhugimr .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#gnddhugimr .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gnddhugimr .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#gnddhugimr .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#gnddhugimr .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#gnddhugimr .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#gnddhugimr .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#gnddhugimr .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#gnddhugimr .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#gnddhugimr .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#gnddhugimr .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#gnddhugimr .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#gnddhugimr .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#gnddhugimr .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#gnddhugimr .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gnddhugimr .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#gnddhugimr .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#gnddhugimr .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#gnddhugimr .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gnddhugimr .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#gnddhugimr .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#gnddhugimr .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gnddhugimr .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gnddhugimr .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#gnddhugimr .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gnddhugimr .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#gnddhugimr .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gnddhugimr .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#gnddhugimr .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gnddhugimr .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#gnddhugimr .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gnddhugimr .gt_left {\n  text-align: left;\n}\n\n#gnddhugimr .gt_center {\n  text-align: center;\n}\n\n#gnddhugimr .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#gnddhugimr .gt_font_normal {\n  font-weight: normal;\n}\n\n#gnddhugimr .gt_font_bold {\n  font-weight: bold;\n}\n\n#gnddhugimr .gt_font_italic {\n  font-style: italic;\n}\n\n#gnddhugimr .gt_super {\n  font-size: 65%;\n}\n\n#gnddhugimr .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#gnddhugimr .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#gnddhugimr .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#gnddhugimr .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#gnddhugimr .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#gnddhugimr .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#gnddhugimr .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#gnddhugimr .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#gnddhugimr div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"5\" class=\"gt_heading gt_title gt_font_normal\" style>A selected sample of the PITCHf/x data</td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"5\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style>Note: This is not all of the important columns, just a view for demonstration purposes.</td>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_type\">pitch_type</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"game_date\">game_date</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"player_name\">player_name</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"balls\">balls</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"strikes\">strikes</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">KC</td>\n<td headers=\"game_date\" class=\"gt_row gt_right\">2024-10-30</td>\n<td headers=\"player_name\" class=\"gt_row gt_left\">Buehler, Walker</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">1</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">2</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">KC</td>\n<td headers=\"game_date\" class=\"gt_row gt_right\">2024-10-30</td>\n<td headers=\"player_name\" class=\"gt_row gt_left\">Buehler, Walker</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">1</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">FC</td>\n<td headers=\"game_date\" class=\"gt_row gt_right\">2024-10-30</td>\n<td headers=\"player_name\" class=\"gt_row gt_left\">Buehler, Walker</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">1</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">0</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">KC</td>\n<td headers=\"game_date\" class=\"gt_row gt_right\">2024-10-30</td>\n<td headers=\"player_name\" class=\"gt_row gt_left\">Buehler, Walker</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">0</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">0</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">KC</td>\n<td headers=\"game_date\" class=\"gt_row gt_right\">2024-10-30</td>\n<td headers=\"player_name\" class=\"gt_row gt_left\">Buehler, Walker</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">3</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">2</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"game_date\" class=\"gt_row gt_right\">2024-10-30</td>\n<td headers=\"player_name\" class=\"gt_row gt_left\">Buehler, Walker</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">2</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">2</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">KC</td>\n<td headers=\"game_date\" class=\"gt_row gt_right\">2024-10-30</td>\n<td headers=\"player_name\" class=\"gt_row gt_left\">Buehler, Walker</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">2</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">2</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">KC</td>\n<td headers=\"game_date\" class=\"gt_row gt_right\">2024-10-30</td>\n<td headers=\"player_name\" class=\"gt_row gt_left\">Buehler, Walker</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">2</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"game_date\" class=\"gt_row gt_right\">2024-10-30</td>\n<td headers=\"player_name\" class=\"gt_row gt_left\">Buehler, Walker</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">1</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">KC</td>\n<td headers=\"game_date\" class=\"gt_row gt_right\">2024-10-30</td>\n<td headers=\"player_name\" class=\"gt_row gt_left\">Buehler, Walker</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">0</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">1</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\n::: {.callout-note collapse=\"true\" title=\"Exercise 1\" appearance=\"minimal\"}\nNow you try!\n\n1.  First isolate the variables batter, pitcher, home_team, away_team, and game_date.\n2.  Then make sure that only the first 5 rows are visible\n3.  Lastly add a header that summarizes the information displayed.\n:::\n\n::: {.callout-note collapse=\"true\" title=\"Exercise 1 Answer Key\" appearance=\"minimal\"}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npitches %>% \n  select(batter, pitcher, home_team, away_team, game_date) %>%\n  head(5) %>% \n  gt() %>%\n  tab_header(\"A selected sample of the PITCHf/x data\",\n             \"The table below includes the batter, pitcher, home_team, away_team, and game_date.\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"syrjojsnna\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#syrjojsnna table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#syrjojsnna thead, #syrjojsnna tbody, #syrjojsnna tfoot, #syrjojsnna tr, #syrjojsnna td, #syrjojsnna th {\n  border-style: none;\n}\n\n#syrjojsnna p {\n  margin: 0;\n  padding: 0;\n}\n\n#syrjojsnna .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#syrjojsnna .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#syrjojsnna .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#syrjojsnna .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#syrjojsnna .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#syrjojsnna .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#syrjojsnna .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#syrjojsnna .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#syrjojsnna .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#syrjojsnna .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#syrjojsnna .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#syrjojsnna .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#syrjojsnna .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#syrjojsnna .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#syrjojsnna .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#syrjojsnna .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#syrjojsnna .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#syrjojsnna .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#syrjojsnna .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#syrjojsnna .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#syrjojsnna .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#syrjojsnna .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#syrjojsnna .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#syrjojsnna .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#syrjojsnna .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#syrjojsnna .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#syrjojsnna .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#syrjojsnna .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#syrjojsnna .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#syrjojsnna .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#syrjojsnna .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#syrjojsnna .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#syrjojsnna .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#syrjojsnna .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#syrjojsnna .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#syrjojsnna .gt_left {\n  text-align: left;\n}\n\n#syrjojsnna .gt_center {\n  text-align: center;\n}\n\n#syrjojsnna .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#syrjojsnna .gt_font_normal {\n  font-weight: normal;\n}\n\n#syrjojsnna .gt_font_bold {\n  font-weight: bold;\n}\n\n#syrjojsnna .gt_font_italic {\n  font-style: italic;\n}\n\n#syrjojsnna .gt_super {\n  font-size: 65%;\n}\n\n#syrjojsnna .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#syrjojsnna .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#syrjojsnna .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#syrjojsnna .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#syrjojsnna .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#syrjojsnna .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#syrjojsnna .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#syrjojsnna .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#syrjojsnna div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"5\" class=\"gt_heading gt_title gt_font_normal\" style>A selected sample of the PITCHf/x data</td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"5\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style>The table below includes the batter, pitcher, home_team, away_team, and game_date.</td>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"batter\">batter</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitcher\">pitcher</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"home_team\">home_team</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"away_team\">away_team</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"game_date\">game_date</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"batter\" class=\"gt_row gt_right\">657077</td>\n<td headers=\"pitcher\" class=\"gt_row gt_right\">621111</td>\n<td headers=\"home_team\" class=\"gt_row gt_left\">NYY</td>\n<td headers=\"away_team\" class=\"gt_row gt_left\">LAD</td>\n<td headers=\"game_date\" class=\"gt_row gt_right\">2024-10-30</td></tr>\n    <tr><td headers=\"batter\" class=\"gt_row gt_right\">657077</td>\n<td headers=\"pitcher\" class=\"gt_row gt_right\">621111</td>\n<td headers=\"home_team\" class=\"gt_row gt_left\">NYY</td>\n<td headers=\"away_team\" class=\"gt_row gt_left\">LAD</td>\n<td headers=\"game_date\" class=\"gt_row gt_right\">2024-10-30</td></tr>\n    <tr><td headers=\"batter\" class=\"gt_row gt_right\">657077</td>\n<td headers=\"pitcher\" class=\"gt_row gt_right\">621111</td>\n<td headers=\"home_team\" class=\"gt_row gt_left\">NYY</td>\n<td headers=\"away_team\" class=\"gt_row gt_left\">LAD</td>\n<td headers=\"game_date\" class=\"gt_row gt_right\">2024-10-30</td></tr>\n    <tr><td headers=\"batter\" class=\"gt_row gt_right\">657077</td>\n<td headers=\"pitcher\" class=\"gt_row gt_right\">621111</td>\n<td headers=\"home_team\" class=\"gt_row gt_left\">NYY</td>\n<td headers=\"away_team\" class=\"gt_row gt_left\">LAD</td>\n<td headers=\"game_date\" class=\"gt_row gt_right\">2024-10-30</td></tr>\n    <tr><td headers=\"batter\" class=\"gt_row gt_right\">669224</td>\n<td headers=\"pitcher\" class=\"gt_row gt_right\">621111</td>\n<td headers=\"home_team\" class=\"gt_row gt_left\">NYY</td>\n<td headers=\"away_team\" class=\"gt_row gt_left\">LAD</td>\n<td headers=\"game_date\" class=\"gt_row gt_right\">2024-10-30</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n:::\n\n# Creating New Variables\n\nAs we work through this next section, some questions to consider are:\n\n-   How should we clean the data?\n-   What variables need to be considered?\n-   What should be our response variable?\n-   What outcomes are good for the pitcher?\n-   What outcomes benefit the batter?\n\nSince our aim is to find what pitch sequences, if any, lead to the greatest pitch success, we first need to define what success is for the scope of our project. We call any of these outcomes **successful** for the reasons to follow: swinging strike, called strike, foul tip, swinging strike blocked, foul, foul bunt, missed bunt, and bunt foul tip. These can be considered successful for the pitcher because they all count as a strike for the batter without putting the ball into play. Effectively, the pitcher gains an upper hand on the batter and progresses in the count when one of these occur. Alternatively, other outcomes such as a hit or a ball will be considered unsuccessful since the batter either succeeds putting the ball into play or gets another step towards a hitter's count. Remember: **we are considering a \"success\" from a pitcher's perspective**.\n\nNow let's **create a success variable**. We will consider a success whether a pitch results in a strike or not. Since foul balls result from less than ideal contact with the bat, we will consider those successful from the pitcher's perspective. The rest of the included descriptions follow this logic and refer to successful pitches.\n\nTo determine the values we want to pull out for success, we need to look at the different options available to us in the data. To do this we can run the following code:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nunique(pitches$description)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"swinging_strike_blocked\" \"swinging_strike\"        \n [3] \"ball\"                    \"foul\"                   \n [5] \"called_strike\"           \"hit_into_play\"          \n [7] \"blocked_ball\"            \"foul_tip\"               \n [9] \"foul_bunt\"               \"hit_by_pitch\"           \n[11] \"missed_bunt\"             \"bunt_foul_tip\"          \n[13] \"pitchout\"               \n```\n\n\n:::\n:::\n\n\n\n\nLooking at the list of descriptions provided by the output we can begin to determine the descriptions we would consider success from the pitchers view.\n\nIn order to create a new variable we will use the mutate function. Within mutate, you start by creating a name for your new variable and setting it equal to the rule or formula you want it to become. For \"success\", we want all pitches with a description of: swinging_strike, called_strike, foul_tip, swinging_strike_blocked, foul, foul_bunt, missed_bunt, bunt_foul_tip, to be considered a success designated by a \"1\" and any other description to be considered a failure designated by a \"0\". It is important to make these binary, so that we can easily calculate the percent of successful pitches.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npitches <- pitches %>%\n  mutate(success = if_else(description %in% c(\"swinging_strike\", \"called_strike\", \"foul_tip\", \"swinging_strike_blocked\", \"foul\", \"foul_bunt\", \"missed_bunt\", \"bunt_foul_tip\"), 1, 0))\n```\n:::\n\n\n\n\n::: column-margin\n**Consideration:** As you work through this SCORE Module, consider the following: A well hit pitch that goes just foul can provide the batter a lot of confidence that they understand and can predict the pitcher. If we were to consider fouls \"failures\" for the pitcher rather than \"successes\", how would our outputs change?\n:::\n\n::: {.callout-note collapse=\"true\" title=\"Exercise 2\" appearance=\"minimal\"}\nWhat if we want to define success from the batters point of view. How would the above code change?\n:::\n\n::: {.callout-note collapse=\"true\" title=\"Exercise 2 Answer Key\" appearance=\"minimal\"}\nThere are two ways we can change success in order for it to be from the batter perspective. First we could redefine the descriptions that are successful:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npitches2 <- pitches %>%\n  mutate(success = if_else(description %in% c(\"hit_into_play\", \"ball\", \"hit_by_pitch\", \"blocked_ball\", \"pitchout\"), 1, 0))\n\nhead(cbind(pitches2$description, pitches2$success))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     [,1]                      [,2]\n[1,] \"swinging_strike_blocked\" \"0\" \n[2,] \"swinging_strike\"         \"0\" \n[3,] \"swinging_strike\"         \"0\" \n[4,] \"ball\"                    \"1\" \n[5,] \"swinging_strike\"         \"0\" \n[6,] \"ball\"                    \"1\" \n```\n\n\n:::\n:::\n\n\n\n\nOr an easier solution, but less intuitive, we could have simply switched the 0s and 1s.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npitches2 <- pitches %>%\n  mutate(success = if_else(description %in% c(\"swinging_strike\", \"called_strike\", \"foul_tip\", \"swinging_strike_blocked\", \"foul\", \"foul_bunt\", \"missed_bunt\", \"bunt_foul_tip\"), 0, 1))\n\nhead(cbind(pitches2$description, pitches2$success))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     [,1]                      [,2]\n[1,] \"swinging_strike_blocked\" \"0\" \n[2,] \"swinging_strike\"         \"0\" \n[3,] \"swinging_strike\"         \"0\" \n[4,] \"ball\"                    \"1\" \n[5,] \"swinging_strike\"         \"0\" \n[6,] \"ball\"                    \"1\" \n```\n\n\n:::\n:::\n\n\n\n:::\n\nWith the success variable established, we'll take a brief look at the pitch types and their success rate in the data. We want to create a table that shows us the probability of success for each of the pitch types observed. In order to do this we will need to use the group_by() function in order to subset the data by pitch_type. Then the summarise function allows us to view the total pitches in each pitch type and calculating the mean of success allows us to see the proportion of time each pitch_type was successful. Then using total_pitches we can use mutate to add a new column for success_rate. Lastly, the arrange() function allows the user to order the information by success rate and the minus forces it to be descending.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npitch_type_success <- pitches %>%\n  group_by(pitch_type) %>%\n  summarise(total_pitches = n(),\n            success_rate = round(mean(success), 4)) %>%\n  mutate(percent_total_pitches = round((100 * total_pitches / sum(total_pitches)), 4)) %>% \n  arrange(-success_rate)\n\npitch_type_success %>%\n  gt() %>%\n  tab_header(\"Pitch Type\", \"Success rate and Percent of Occurence\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"gcvbvbftfz\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#gcvbvbftfz table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#gcvbvbftfz thead, #gcvbvbftfz tbody, #gcvbvbftfz tfoot, #gcvbvbftfz tr, #gcvbvbftfz td, #gcvbvbftfz th {\n  border-style: none;\n}\n\n#gcvbvbftfz p {\n  margin: 0;\n  padding: 0;\n}\n\n#gcvbvbftfz .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#gcvbvbftfz .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#gcvbvbftfz .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#gcvbvbftfz .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#gcvbvbftfz .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#gcvbvbftfz .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gcvbvbftfz .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#gcvbvbftfz .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#gcvbvbftfz .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#gcvbvbftfz .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#gcvbvbftfz .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#gcvbvbftfz .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#gcvbvbftfz .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#gcvbvbftfz .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#gcvbvbftfz .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#gcvbvbftfz .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#gcvbvbftfz .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#gcvbvbftfz .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#gcvbvbftfz .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gcvbvbftfz .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#gcvbvbftfz .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#gcvbvbftfz .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#gcvbvbftfz .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gcvbvbftfz .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#gcvbvbftfz .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#gcvbvbftfz .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gcvbvbftfz .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gcvbvbftfz .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#gcvbvbftfz .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gcvbvbftfz .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#gcvbvbftfz .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#gcvbvbftfz .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#gcvbvbftfz .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gcvbvbftfz .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#gcvbvbftfz .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#gcvbvbftfz .gt_left {\n  text-align: left;\n}\n\n#gcvbvbftfz .gt_center {\n  text-align: center;\n}\n\n#gcvbvbftfz .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#gcvbvbftfz .gt_font_normal {\n  font-weight: normal;\n}\n\n#gcvbvbftfz .gt_font_bold {\n  font-weight: bold;\n}\n\n#gcvbvbftfz .gt_font_italic {\n  font-style: italic;\n}\n\n#gcvbvbftfz .gt_super {\n  font-size: 65%;\n}\n\n#gcvbvbftfz .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#gcvbvbftfz .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#gcvbvbftfz .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#gcvbvbftfz .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#gcvbvbftfz .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#gcvbvbftfz .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#gcvbvbftfz .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#gcvbvbftfz .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#gcvbvbftfz div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"4\" class=\"gt_heading gt_title gt_font_normal\" style>Pitch Type</td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"4\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style>Success rate and Percent of Occurence</td>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_type\">pitch_type</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"total_pitches\">total_pitches</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"success_rate\">success_rate</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"percent_total_pitches\">percent_total_pitches</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">224988</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4992</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">31.8803</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">FO</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">144</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4931</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.0204</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">NA</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">285</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4877</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.0404</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">FC</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">56762</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4714</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">8.0430</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">111957</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4683</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">15.8640</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">SI</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">112013</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4680</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">15.8720</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">KC</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">11749</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4592</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">1.6648</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">CU</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">46241</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4568</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">6.5522</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">ST</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">43349</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4560</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">6.1425</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">SV</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">2651</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4489</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.3756</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">FS</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">21218</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4223</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">3.0065</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">KN</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">971</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4161</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.1376</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">CH</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">71945</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4061</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">10.1944</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">SC</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">182</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.3736</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.0258</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">CS</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">21</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.3333</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.0030</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">FA</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">626</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.3307</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.0887</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">EP</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">575</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.2609</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.0815</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">PO</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">51</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.0000</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.0072</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\n::: {.callout-note collapse=\"true\" title=\"Exercise 3\" appearance=\"minimal\"}\nWhat if we want pitch type to be ordered by percent_total_pitches descending? What do we need to change to make this happen?\n:::\n\n::: {.callout-note collapse=\"true\" title=\"Exercise 3 Answer Key\" appearance=\"minimal\"}\nIn order to do this, the only line of code that needed to be changed was that last one.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npitch_type_success2 <- pitches %>%\n  group_by(pitch_type) %>%\n  summarise(total_pitches = n(),\n            success_rate = round(mean(success), 4)) %>%\n  mutate(percent_total_pitches = round((100 * total_pitches / sum(total_pitches)), 4)) %>% \n  arrange(-percent_total_pitches)\n\npitch_type_success2 %>%\n  gt() %>%\n  tab_header(\"Pitch Type\", \"Success rate and Percent of Occurence\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"oqgcgkulfk\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#oqgcgkulfk table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#oqgcgkulfk thead, #oqgcgkulfk tbody, #oqgcgkulfk tfoot, #oqgcgkulfk tr, #oqgcgkulfk td, #oqgcgkulfk th {\n  border-style: none;\n}\n\n#oqgcgkulfk p {\n  margin: 0;\n  padding: 0;\n}\n\n#oqgcgkulfk .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#oqgcgkulfk .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#oqgcgkulfk .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#oqgcgkulfk .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#oqgcgkulfk .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#oqgcgkulfk .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oqgcgkulfk .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#oqgcgkulfk .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#oqgcgkulfk .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#oqgcgkulfk .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#oqgcgkulfk .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#oqgcgkulfk .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#oqgcgkulfk .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#oqgcgkulfk .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#oqgcgkulfk .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#oqgcgkulfk .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#oqgcgkulfk .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#oqgcgkulfk .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#oqgcgkulfk .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oqgcgkulfk .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#oqgcgkulfk .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#oqgcgkulfk .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#oqgcgkulfk .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oqgcgkulfk .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#oqgcgkulfk .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#oqgcgkulfk .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oqgcgkulfk .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oqgcgkulfk .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#oqgcgkulfk .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oqgcgkulfk .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#oqgcgkulfk .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oqgcgkulfk .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#oqgcgkulfk .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oqgcgkulfk .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#oqgcgkulfk .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oqgcgkulfk .gt_left {\n  text-align: left;\n}\n\n#oqgcgkulfk .gt_center {\n  text-align: center;\n}\n\n#oqgcgkulfk .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#oqgcgkulfk .gt_font_normal {\n  font-weight: normal;\n}\n\n#oqgcgkulfk .gt_font_bold {\n  font-weight: bold;\n}\n\n#oqgcgkulfk .gt_font_italic {\n  font-style: italic;\n}\n\n#oqgcgkulfk .gt_super {\n  font-size: 65%;\n}\n\n#oqgcgkulfk .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#oqgcgkulfk .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#oqgcgkulfk .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#oqgcgkulfk .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#oqgcgkulfk .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#oqgcgkulfk .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#oqgcgkulfk .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#oqgcgkulfk .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#oqgcgkulfk div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"4\" class=\"gt_heading gt_title gt_font_normal\" style>Pitch Type</td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"4\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style>Success rate and Percent of Occurence</td>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_type\">pitch_type</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"total_pitches\">total_pitches</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"success_rate\">success_rate</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"percent_total_pitches\">percent_total_pitches</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">224988</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4992</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">31.8803</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">SI</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">112013</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4680</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">15.8720</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">111957</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4683</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">15.8640</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">CH</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">71945</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4061</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">10.1944</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">FC</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">56762</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4714</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">8.0430</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">CU</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">46241</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4568</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">6.5522</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">ST</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">43349</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4560</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">6.1425</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">FS</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">21218</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4223</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">3.0065</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">KC</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">11749</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4592</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">1.6648</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">SV</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">2651</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4489</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.3756</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">KN</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">971</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4161</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.1376</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">FA</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">626</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.3307</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.0887</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">EP</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">575</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.2609</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.0815</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">NA</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">285</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4877</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.0404</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">SC</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">182</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.3736</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.0258</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">FO</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">144</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4931</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.0204</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">PO</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">51</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.0000</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.0072</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">CS</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">21</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.3333</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.0030</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n:::\n\nSomething you may notice is that one of the rows is NA for Pitch Type. This is likely because it did not clearly fall into one of the categories. Therefore rather than leave it as NA, we can change the name to be \"Other\". In order to do this we subset the data by using brackets and find every where there is currently NA, and replace it with \"Other\". Using the unique() function we can verify that there are no longer NA entries.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npitch_type_success$pitch_type[is.na(pitch_type_success$pitch_type)] <- \"Other\"\nunique(pitch_type_success$pitch_type)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"FF\"    \"FO\"    \"Other\" \"FC\"    \"SL\"    \"SI\"    \"KC\"    \"CU\"    \"ST\"   \n[10] \"SV\"    \"FS\"    \"KN\"    \"CH\"    \"SC\"    \"CS\"    \"FA\"    \"EP\"    \"PO\"   \n```\n\n\n:::\n:::\n\n\n\n\n::: column-margin\n**Consideration:** We will going back to using our original dataframe \"pitches\" so it will be important to also run the following code:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npitches$pitch_type[is.na(pitches$pitch_type)] <- \"Other\"\n```\n:::\n\n\n\n:::\n\nNow when we run the code from before, we can see the change in our table.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npitch_type_success %>%\n  gt() %>%\n  tab_header(\"Pitch Type\", \"Success rate and Percent of Occurence\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"qoxjfjdegx\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#qoxjfjdegx table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#qoxjfjdegx thead, #qoxjfjdegx tbody, #qoxjfjdegx tfoot, #qoxjfjdegx tr, #qoxjfjdegx td, #qoxjfjdegx th {\n  border-style: none;\n}\n\n#qoxjfjdegx p {\n  margin: 0;\n  padding: 0;\n}\n\n#qoxjfjdegx .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#qoxjfjdegx .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#qoxjfjdegx .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#qoxjfjdegx .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#qoxjfjdegx .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#qoxjfjdegx .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#qoxjfjdegx .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#qoxjfjdegx .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#qoxjfjdegx .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#qoxjfjdegx .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#qoxjfjdegx .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#qoxjfjdegx .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#qoxjfjdegx .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#qoxjfjdegx .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#qoxjfjdegx .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#qoxjfjdegx .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#qoxjfjdegx .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#qoxjfjdegx .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#qoxjfjdegx .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#qoxjfjdegx .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#qoxjfjdegx .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#qoxjfjdegx .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#qoxjfjdegx .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#qoxjfjdegx .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#qoxjfjdegx .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#qoxjfjdegx .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#qoxjfjdegx .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#qoxjfjdegx .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#qoxjfjdegx .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#qoxjfjdegx .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#qoxjfjdegx .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#qoxjfjdegx .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#qoxjfjdegx .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#qoxjfjdegx .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#qoxjfjdegx .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#qoxjfjdegx .gt_left {\n  text-align: left;\n}\n\n#qoxjfjdegx .gt_center {\n  text-align: center;\n}\n\n#qoxjfjdegx .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#qoxjfjdegx .gt_font_normal {\n  font-weight: normal;\n}\n\n#qoxjfjdegx .gt_font_bold {\n  font-weight: bold;\n}\n\n#qoxjfjdegx .gt_font_italic {\n  font-style: italic;\n}\n\n#qoxjfjdegx .gt_super {\n  font-size: 65%;\n}\n\n#qoxjfjdegx .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#qoxjfjdegx .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#qoxjfjdegx .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#qoxjfjdegx .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#qoxjfjdegx .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#qoxjfjdegx .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#qoxjfjdegx .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#qoxjfjdegx .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#qoxjfjdegx div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"4\" class=\"gt_heading gt_title gt_font_normal\" style>Pitch Type</td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"4\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style>Success rate and Percent of Occurence</td>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_type\">pitch_type</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"total_pitches\">total_pitches</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"success_rate\">success_rate</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"percent_total_pitches\">percent_total_pitches</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">224988</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4992</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">31.8803</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">FO</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">144</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4931</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.0204</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">Other</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">285</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4877</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.0404</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">FC</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">56762</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4714</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">8.0430</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">111957</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4683</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">15.8640</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">SI</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">112013</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4680</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">15.8720</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">KC</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">11749</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4592</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">1.6648</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">CU</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">46241</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4568</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">6.5522</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">ST</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">43349</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4560</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">6.1425</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">SV</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">2651</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4489</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.3756</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">FS</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">21218</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4223</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">3.0065</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">KN</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">971</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4161</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.1376</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">CH</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">71945</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4061</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">10.1944</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">SC</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">182</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.3736</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.0258</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">CS</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">21</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.3333</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.0030</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">FA</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">626</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.3307</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.0887</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">EP</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">575</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.2609</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.0815</td></tr>\n    <tr><td headers=\"pitch_type\" class=\"gt_row gt_left\">PO</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">51</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.0000</td>\n<td headers=\"percent_total_pitches\" class=\"gt_row gt_right\">0.0072</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\nIt is important to note that each pitch type has a varying level of frequency in the data. Most commonly, we observe \"FF\" - four seam fastballs, and infrequently we see \"FO\" - forkballs.\n\n::: column-margin\n**Consideration:** This imbalance in pitch type frequency should be noted as we continue as it may have a significant effect on our results.\n:::\n\nFurthermore, we notice very similar overall success rates for each pitch type. This is to be expected since if one pitch showed an observable advantage, all pitchers would begin throwing that pitch type more often and batters would adjust accordingly. This system is likely to balance out in all pitches being similarly effective as shown.\n\nOur inspection of the pitches shows us that the data set includes **18 different types of pitches**, including the previously blank one that we redefined as \"Other\". We need to **reduce the number of pitch types** in order to keep our analysis comprehensible. This is because in pitch sequencing, the order of pitch types matter (as the name would suggest), so the number of possible three pitch sequences would follow the formula for permutations with replacement (as opposed to combinations which do not depend on order): The number of possible sequences is equal to the number of pitch types raised to the number of pitches thrown. This means that we would get 5,832 possible three pitch sequences from the 18 possible categories. In an effort to reduce this, we will combine pitch types into more general categories.\n\nAs we continue to work through this section, some questions to consider are:\n\n-   What is a reasonable number of pitch sequences that you would like to analyze?\n-   Which pitch sequence do you think would perform the best?\n-   Which do you think is the most common?\n\nTo reduce the number of sequences, we group many pitch types into categories based on similarities. For example, two-seam fastballs and four-seam fastballs are quite similar, so they will be grouped together. The chosen groups are 'Fastballs', 'Breaking Balls', 'Off-Speeds', and 'Other'. Below is an explanation of the 18 pitch types and their chosen designation.\n\n::: column-margin\n**Consideration:** Our pitch designation is not universally agreed upon.\n:::\n\n::: {.callout-note collapse=\"true\" title=\"Pitch Type and Categories\" appearance=\"minimal\"}\n**Fastballs**\n\n-   FF: Four-seam fastball\n-   FA: Fastball\n-   SI: Sinker (two-seam fastball)\n-   FC: Cutter (Cut-fastball)\n\n**Breaking Ball**\n\n-   SL: Slider\n-   CU: Curveball\n-   KC: Knuckle curve ball\n-   ST: Sweeper\n-   SV: Slurve\n-   SC: Screwball\n-   CS: Slow Curve\n\n**Off-Speed**\n\n-   CH: Changeup\n-   FS: Split-finger fastball\n-   FO: Forkball\n-   EP: Eephus\n-   KN: Knuckleball\n\n**Other**\n\n-   PO: Pitch-out\n-   Other: originally listed as NA\n\nFor more information please visit (<https://www.mlb.com/glossary/pitch-types>).\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npitches <- pitches %>%\n  mutate(pitch_category = case_when(\n    pitch_type %in% c(\"FF\", \"FA\", \"SI\", \"FC\") ~ \"Fastball\",\n    pitch_type %in% c(\"SL\", \"CU\", \"KC\", \"ST\", \"SV\", \"SC\", \"CS\") ~ \"Breaking Ball\",\n    pitch_type %in% c(\"CH\", \"FS\", \"FO\", \"EP\", \"KN\") ~ \"Off-Speed\",\n    pitch_type %in% c(\"PO\", \"Other\") ~ \"Other\"))\n\n\npitches %>%\n  group_by(pitch_category) %>%\n  summarise(count = n()) %>%\n  mutate(percent = 100 * count / sum(count)) %>%\n  arrange(-percent)  %>% \n  gt() %>%\n  tab_header(\"New Pitch Categories\", \"Percent of observations in each category\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"rsgrygedut\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#rsgrygedut table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#rsgrygedut thead, #rsgrygedut tbody, #rsgrygedut tfoot, #rsgrygedut tr, #rsgrygedut td, #rsgrygedut th {\n  border-style: none;\n}\n\n#rsgrygedut p {\n  margin: 0;\n  padding: 0;\n}\n\n#rsgrygedut .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#rsgrygedut .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#rsgrygedut .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#rsgrygedut .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#rsgrygedut .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#rsgrygedut .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rsgrygedut .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#rsgrygedut .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#rsgrygedut .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#rsgrygedut .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#rsgrygedut .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#rsgrygedut .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#rsgrygedut .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#rsgrygedut .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#rsgrygedut .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#rsgrygedut .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#rsgrygedut .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#rsgrygedut .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#rsgrygedut .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rsgrygedut .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#rsgrygedut .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#rsgrygedut .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#rsgrygedut .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rsgrygedut .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#rsgrygedut .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#rsgrygedut .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rsgrygedut .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rsgrygedut .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#rsgrygedut .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rsgrygedut .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#rsgrygedut .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rsgrygedut .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#rsgrygedut .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rsgrygedut .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#rsgrygedut .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rsgrygedut .gt_left {\n  text-align: left;\n}\n\n#rsgrygedut .gt_center {\n  text-align: center;\n}\n\n#rsgrygedut .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#rsgrygedut .gt_font_normal {\n  font-weight: normal;\n}\n\n#rsgrygedut .gt_font_bold {\n  font-weight: bold;\n}\n\n#rsgrygedut .gt_font_italic {\n  font-style: italic;\n}\n\n#rsgrygedut .gt_super {\n  font-size: 65%;\n}\n\n#rsgrygedut .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#rsgrygedut .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#rsgrygedut .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#rsgrygedut .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#rsgrygedut .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#rsgrygedut .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#rsgrygedut .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#rsgrygedut .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#rsgrygedut div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"3\" class=\"gt_heading gt_title gt_font_normal\" style>New Pitch Categories</td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"3\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style>Percent of observations in each category</td>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_category\">pitch_category</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"count\">count</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"percent\">percent</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"count\" class=\"gt_row gt_right\">394389</td>\n<td headers=\"percent\" class=\"gt_row gt_right\">55.88399497</td></tr>\n    <tr><td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"count\" class=\"gt_row gt_right\">216150</td>\n<td headers=\"percent\" class=\"gt_row gt_right\">30.62794731</td></tr>\n    <tr><td headers=\"pitch_category\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"count\" class=\"gt_row gt_right\">94853</td>\n<td headers=\"percent\" class=\"gt_row gt_right\">13.44044731</td></tr>\n    <tr><td headers=\"pitch_category\" class=\"gt_row gt_left\">Other</td>\n<td headers=\"count\" class=\"gt_row gt_right\">336</td>\n<td headers=\"percent\" class=\"gt_row gt_right\">0.04761041</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\nIt is worth noting that there is a moderate imbalance in the number of examples we are working with for each pitch category. This may be an issue later on when we use logistic regression and will be discussed then. With the \"Other\" category making up less than 0.5% of the pitches, we will ultimately discard it from consideration. Furthermore, the \"Other\" category is comprised of pitch-outs and undefined pitches, which are not valuable for our intended analysis. With the remaining three categories, we will now have a total of 27 unique pitch sequences.\n\n# Transition Matrix\n\nAs we work through this next section, there is one main question we will be working to answer:\n\n-   How do we determine the next pitch knowing the previous two?\n\nIn a transition matrix, the rows represent your current state and the columns represent your future state. Within a transition matrix are probabilities that denote your ability to move from your current state to the future state.\n\n$$P_{ij} = P(\\text{future state} = j| \\text{current state} = i)$$\n\nSince a transition matrix is a markov process, a key assumption is that the process is memoryless. This means that given your current state, the future event’s probability does not depend on how you arrived at your current state. In terms of baseball pitching, this means that the process does not treat a batter arriving at a 3-2 count differently if in previous states it was 0-2 and fought their way back, or if they were 3-0 and watched two strikes down the pipe. However, since this is only preliminary analysis we are not concerned with this limitation and are still able to learn a lot about pitch sequencing.\n\nFor our first investigation, we want to see what pitch is most likely to happen given the first two. We will do this by **separating consecutive 3-pitch sequences in the data that occurred on the same at bat**. Furthermore, this means that a 4-pitch at-bat would create two sets of three, the first three pitches as one \"triplet\" and the last three pitches as a second \"triplet\". After creating these triplets, we will create a transition matrix to investigate the probability of the next pitch given the first two.\n\n::: {.callout-note title=\"**Question:**\" appearance=\"minimal\"}\nWhat are the pros and cons to using a shorter sequence? Why three pitches instead of four or more?\n:::\n\n::: {.callout-note collapse=\"true\" title=\"**Answer:**\" appearance=\"minimal\"}\nLonger strings of pitches create exponentially more combinations of pitch sequences. Additionally, there will be fewer data points of four or more pitches in a row. Furthermore, any strikeout, which is a success for a pitcher, has a minimum of three pitches.\n:::\n\nFirst, we need to **take out any anomaly pitch or event within it** such as bunts and pitch-outs since those are inherently different than traditional swings/pitches and very much situationally dependent. At this time we will also remove the \"Other\" category as mentioned in the previous section.\n\nFirst we created a vector of the descriptions we will remove from consideration: foul bunt, missed bunt, bunt foul tip, and pitchout. Then we filtered the data so that it only included the data that did not have these descriptions or that were not classified as other. When coding in R, \"!\" acts as not. Thus, \"!=\" can be read as not equal to. We verify that the \"Other\" category has been removed by using the unique function.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexclude_desc <- c(\"foul_bunt\", \"missed_bunt\", \"bunt_foul_tip\", \"pitchout\")\n\npitches_clean <- pitches %>%\n  filter(!description %in% exclude_desc, pitch_category  != \"Other\")\n\nunique(pitches_clean$pitch_category)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Breaking Ball\" \"Fastball\"      \"Off-Speed\"    \n```\n\n\n:::\n:::\n\n\n\n\nNow we create a new dataframe with information we might want concerning pitch sequences. We first arrange the data by game date, gamepk (which is a game identifier), at_bat_number, and pitch number (which is by batter). This ensures that regardless of how the data was organized previously the order will now be in the order we need for pitch sequencing appropriately. Then we selected variables that might be of interest later.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npitch_seq <- pitches_clean %>%\n  arrange(game_date, game_pk, at_bat_number, pitch_number) %>% \n  select(game_date, game_pk, at_bat_number, inning_topbot, inning, batter, pitch_number, balls, strikes, outs_when_up, description, pitch_type, pitch_category, player_name, pitcher, events, success, plate_x, plate_z)\n\n\npitch_seq %>%\n    select(game_date, game_pk, at_bat_number, inning_topbot, inning, batter, pitch_number, balls, strikes, outs_when_up, description, pitch_type, pitch_category, events) %>% \n  head(20) %>% \n  gt() %>%\n  tab_header(\"Pitch Sequence\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"rophpjeabg\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#rophpjeabg table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#rophpjeabg thead, #rophpjeabg tbody, #rophpjeabg tfoot, #rophpjeabg tr, #rophpjeabg td, #rophpjeabg th {\n  border-style: none;\n}\n\n#rophpjeabg p {\n  margin: 0;\n  padding: 0;\n}\n\n#rophpjeabg .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#rophpjeabg .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#rophpjeabg .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#rophpjeabg .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#rophpjeabg .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#rophpjeabg .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rophpjeabg .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#rophpjeabg .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#rophpjeabg .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#rophpjeabg .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#rophpjeabg .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#rophpjeabg .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#rophpjeabg .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#rophpjeabg .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#rophpjeabg .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#rophpjeabg .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#rophpjeabg .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#rophpjeabg .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#rophpjeabg .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rophpjeabg .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#rophpjeabg .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#rophpjeabg .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#rophpjeabg .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rophpjeabg .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#rophpjeabg .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#rophpjeabg .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rophpjeabg .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rophpjeabg .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#rophpjeabg .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rophpjeabg .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#rophpjeabg .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rophpjeabg .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#rophpjeabg .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rophpjeabg .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#rophpjeabg .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rophpjeabg .gt_left {\n  text-align: left;\n}\n\n#rophpjeabg .gt_center {\n  text-align: center;\n}\n\n#rophpjeabg .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#rophpjeabg .gt_font_normal {\n  font-weight: normal;\n}\n\n#rophpjeabg .gt_font_bold {\n  font-weight: bold;\n}\n\n#rophpjeabg .gt_font_italic {\n  font-style: italic;\n}\n\n#rophpjeabg .gt_super {\n  font-size: 65%;\n}\n\n#rophpjeabg .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#rophpjeabg .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#rophpjeabg .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#rophpjeabg .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#rophpjeabg .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#rophpjeabg .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#rophpjeabg .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#rophpjeabg .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#rophpjeabg div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"14\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Pitch Sequence</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"game_date\">game_date</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"game_pk\">game_pk</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"at_bat_number\">at_bat_number</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"inning_topbot\">inning_topbot</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"inning\">inning</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"batter\">batter</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_number\">pitch_number</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"balls\">balls</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"strikes\">strikes</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"outs_when_up\">outs_when_up</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"description\">description</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_type\">pitch_type</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_category\">pitch_category</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"events\">events</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">656582</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">0</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">0</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">called_strike</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">656582</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">2</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">0</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">1</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">ball</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">656582</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">1</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">1</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">foul</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">656582</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">1</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">2</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">ball</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">656582</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">2</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">2</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">ball</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">656582</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">6</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">3</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">2</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">hit_into_play</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">field_out</td></tr>\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">2</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">668804</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">0</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">0</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">ball</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CU</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">2</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">668804</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">2</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">1</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">0</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">hit_into_play</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">single</td></tr>\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">663647</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">0</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">0</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">blocked_ball</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">663647</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">2</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">1</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">0</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">ball</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CH</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">663647</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">2</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">0</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">ball</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">663647</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">3</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">0</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">ball</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">walk</td></tr>\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">0</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">0</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">ball</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">2</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">1</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">0</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">called_strike</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CU</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">1</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">1</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">called_strike</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CH</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">1</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">2</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">foul</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">1</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">2</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">swinging_strike</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">strikeout</td></tr>\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">658668</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">0</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">0</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">2</td>\n<td headers=\"description\" class=\"gt_row gt_left\">ball</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">658668</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">2</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">1</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">0</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">2</td>\n<td headers=\"description\" class=\"gt_row gt_left\">swinging_strike</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">658668</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">1</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">1</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">2</td>\n<td headers=\"description\" class=\"gt_row gt_left\">ball</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\nIn order to understand how we can create three-pitch sequences, lets start by looking at the sequence for batter 457705 from the table above. We can see that this batter had five pitches thrown before he struck out. Five pitches thrown means we have a set of 3 three pitch sequences we can look at just for this at bat (1-2-3, 2-3-4, and 3-4-5). So how do we get these sequences?\n\nFirst for investigation purposes I subset the data just to look at this batters 5 pitches. Then I grouped the data by game_pk and at_bat_number so that when we expand past this small subset we will be able to do this for every combination of game and batter. Then I created three new variables in my dataset, first_pitch, second pitch, and third pitch. The lag() function looks back a designated amount of rows and sets whatever variable that was designated there. For example, \"first_pitch = lag(pitch_category, 2)\" says go back two rows and designate the pitch category two rows back as the first pitch. Realize that this will be NA until the third pitch has happened.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsmall <- pitch_seq[13:17,]\n\nsmall %>% \n  select(game_date, game_pk, at_bat_number, inning_topbot, inning, batter, pitch_number, balls, strikes, outs_when_up, description, pitch_type, pitch_category, events) %>% \n  gt() %>%\n  tab_header(\"Batter 457705 for Game 744875\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"bdbhamrbjs\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#bdbhamrbjs table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#bdbhamrbjs thead, #bdbhamrbjs tbody, #bdbhamrbjs tfoot, #bdbhamrbjs tr, #bdbhamrbjs td, #bdbhamrbjs th {\n  border-style: none;\n}\n\n#bdbhamrbjs p {\n  margin: 0;\n  padding: 0;\n}\n\n#bdbhamrbjs .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#bdbhamrbjs .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#bdbhamrbjs .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#bdbhamrbjs .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#bdbhamrbjs .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#bdbhamrbjs .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bdbhamrbjs .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#bdbhamrbjs .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#bdbhamrbjs .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#bdbhamrbjs .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#bdbhamrbjs .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#bdbhamrbjs .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#bdbhamrbjs .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#bdbhamrbjs .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#bdbhamrbjs .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#bdbhamrbjs .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#bdbhamrbjs .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#bdbhamrbjs .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#bdbhamrbjs .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bdbhamrbjs .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#bdbhamrbjs .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#bdbhamrbjs .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#bdbhamrbjs .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bdbhamrbjs .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#bdbhamrbjs .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#bdbhamrbjs .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bdbhamrbjs .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bdbhamrbjs .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#bdbhamrbjs .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bdbhamrbjs .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#bdbhamrbjs .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bdbhamrbjs .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#bdbhamrbjs .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bdbhamrbjs .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#bdbhamrbjs .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bdbhamrbjs .gt_left {\n  text-align: left;\n}\n\n#bdbhamrbjs .gt_center {\n  text-align: center;\n}\n\n#bdbhamrbjs .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#bdbhamrbjs .gt_font_normal {\n  font-weight: normal;\n}\n\n#bdbhamrbjs .gt_font_bold {\n  font-weight: bold;\n}\n\n#bdbhamrbjs .gt_font_italic {\n  font-style: italic;\n}\n\n#bdbhamrbjs .gt_super {\n  font-size: 65%;\n}\n\n#bdbhamrbjs .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#bdbhamrbjs .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#bdbhamrbjs .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#bdbhamrbjs .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#bdbhamrbjs .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#bdbhamrbjs .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#bdbhamrbjs .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#bdbhamrbjs .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#bdbhamrbjs div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"14\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Batter 457705 for Game 744875</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"game_date\">game_date</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"game_pk\">game_pk</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"at_bat_number\">at_bat_number</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"inning_topbot\">inning_topbot</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"inning\">inning</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"batter\">batter</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_number\">pitch_number</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"balls\">balls</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"strikes\">strikes</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"outs_when_up\">outs_when_up</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"description\">description</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_type\">pitch_type</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_category\">pitch_category</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"events\">events</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">0</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">0</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">ball</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">2</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">1</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">0</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">called_strike</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CU</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">1</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">1</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">called_strike</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CH</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">1</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">2</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">foul</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_date\" class=\"gt_row gt_right\">2024-04-01</td>\n<td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"inning_topbot\" class=\"gt_row gt_left\">Top</td>\n<td headers=\"inning\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"balls\" class=\"gt_row gt_right\">1</td>\n<td headers=\"strikes\" class=\"gt_row gt_right\">2</td>\n<td headers=\"outs_when_up\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">swinging_strike</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">strikeout</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n\n```{.r .cell-code}\nsmall %>%\n  group_by(game_pk, at_bat_number) %>%\n  mutate(\n    first_pitch = lag(pitch_category, 2),\n    second_pitch = lag(pitch_category, 1),\n    third_pitch = pitch_category\n  ) %>% \n  select(game_pk, at_bat_number, batter, pitch_number, pitch_type, pitch_category, first_pitch, second_pitch, third_pitch)  %>% \n  gt() %>%\n  tab_header(\"Pitch Sequence for Batter 457705\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"albkpxioio\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#albkpxioio table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#albkpxioio thead, #albkpxioio tbody, #albkpxioio tfoot, #albkpxioio tr, #albkpxioio td, #albkpxioio th {\n  border-style: none;\n}\n\n#albkpxioio p {\n  margin: 0;\n  padding: 0;\n}\n\n#albkpxioio .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#albkpxioio .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#albkpxioio .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#albkpxioio .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#albkpxioio .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#albkpxioio .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#albkpxioio .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#albkpxioio .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#albkpxioio .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#albkpxioio .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#albkpxioio .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#albkpxioio .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#albkpxioio .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#albkpxioio .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#albkpxioio .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#albkpxioio .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#albkpxioio .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#albkpxioio .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#albkpxioio .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#albkpxioio .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#albkpxioio .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#albkpxioio .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#albkpxioio .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#albkpxioio .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#albkpxioio .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#albkpxioio .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#albkpxioio .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#albkpxioio .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#albkpxioio .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#albkpxioio .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#albkpxioio .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#albkpxioio .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#albkpxioio .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#albkpxioio .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#albkpxioio .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#albkpxioio .gt_left {\n  text-align: left;\n}\n\n#albkpxioio .gt_center {\n  text-align: center;\n}\n\n#albkpxioio .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#albkpxioio .gt_font_normal {\n  font-weight: normal;\n}\n\n#albkpxioio .gt_font_bold {\n  font-weight: bold;\n}\n\n#albkpxioio .gt_font_italic {\n  font-style: italic;\n}\n\n#albkpxioio .gt_super {\n  font-size: 65%;\n}\n\n#albkpxioio .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#albkpxioio .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#albkpxioio .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#albkpxioio .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#albkpxioio .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#albkpxioio .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#albkpxioio .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#albkpxioio .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#albkpxioio div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"7\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Pitch Sequence for Batter 457705</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"batter\">batter</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_number\">pitch_number</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_type\">pitch_type</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_category\">pitch_category</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"first_pitch\">first_pitch</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"second_pitch\">second_pitch</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"third_pitch\">third_pitch</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr class=\"gt_group_heading_row\">\n      <th colspan=\"7\" class=\"gt_group_heading\" scope=\"colgroup\" id=\"744875 - 4\">744875 - 4</th>\n    </tr>\n    <tr class=\"gt_row_group_first\"><td headers=\"744875 - 4  batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"744875 - 4  pitch_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"744875 - 4  pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"744875 - 4  pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"744875 - 4  first_pitch\" class=\"gt_row gt_left\">NA</td>\n<td headers=\"744875 - 4  second_pitch\" class=\"gt_row gt_left\">NA</td>\n<td headers=\"744875 - 4  third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td></tr>\n    <tr><td headers=\"744875 - 4  batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"744875 - 4  pitch_number\" class=\"gt_row gt_right\">2</td>\n<td headers=\"744875 - 4  pitch_type\" class=\"gt_row gt_left\">CU</td>\n<td headers=\"744875 - 4  pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"744875 - 4  first_pitch\" class=\"gt_row gt_left\">NA</td>\n<td headers=\"744875 - 4  second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"744875 - 4  third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td></tr>\n    <tr><td headers=\"744875 - 4  batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"744875 - 4  pitch_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"744875 - 4  pitch_type\" class=\"gt_row gt_left\">CH</td>\n<td headers=\"744875 - 4  pitch_category\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"744875 - 4  first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"744875 - 4  second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"744875 - 4  third_pitch\" class=\"gt_row gt_left\">Off-Speed</td></tr>\n    <tr><td headers=\"744875 - 4  batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"744875 - 4  pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"744875 - 4  pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"744875 - 4  pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"744875 - 4  first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"744875 - 4  second_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"744875 - 4  third_pitch\" class=\"gt_row gt_left\">Fastball</td></tr>\n    <tr><td headers=\"744875 - 4  batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"744875 - 4  pitch_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"744875 - 4  pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"744875 - 4  pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"744875 - 4  first_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"744875 - 4  second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"744875 - 4  third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\nLooking at the table above, it is clear that our code is doing what we want once we have at least three pitches. However, for our analysis we only want three-pitch sequences, so we will need to remove the rows that have NAs in the first_pitch column.\n\nNow that we understand the code, lets create a new dataset with all of our three-pitch sequences.\n\n::: column-margin\n**TIP:** You may notice we ran the function ungroup(). This is typically good practice as it can cause problems down the road if you don't realize your code is still grouped. However, your output right now will not change if you remove this line of code.\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nthree_pitch_seq <- pitch_seq %>%\n  group_by(game_pk, at_bat_number) %>% \n  mutate(\n    first_pitch  = lag(pitch_category, 2),\n    second_pitch = lag(pitch_category, 1),\n    third_pitch  = pitch_category\n  ) %>%\n  ungroup() %>%\n  filter(!is.na(first_pitch)) %>%\n  select(game_pk, at_bat_number, batter, pitch_number, pitch_type, pitch_category, first_pitch, second_pitch, third_pitch)\n\nthree_pitch_seq %>% \n  head(20) %>% \n  gt() %>%\n  tab_header(\"Three Pitch Sequence\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"kvbzlljqqw\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#kvbzlljqqw table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#kvbzlljqqw thead, #kvbzlljqqw tbody, #kvbzlljqqw tfoot, #kvbzlljqqw tr, #kvbzlljqqw td, #kvbzlljqqw th {\n  border-style: none;\n}\n\n#kvbzlljqqw p {\n  margin: 0;\n  padding: 0;\n}\n\n#kvbzlljqqw .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#kvbzlljqqw .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#kvbzlljqqw .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#kvbzlljqqw .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#kvbzlljqqw .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#kvbzlljqqw .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kvbzlljqqw .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#kvbzlljqqw .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#kvbzlljqqw .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#kvbzlljqqw .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#kvbzlljqqw .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#kvbzlljqqw .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#kvbzlljqqw .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#kvbzlljqqw .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#kvbzlljqqw .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#kvbzlljqqw .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#kvbzlljqqw .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#kvbzlljqqw .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#kvbzlljqqw .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kvbzlljqqw .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#kvbzlljqqw .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#kvbzlljqqw .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#kvbzlljqqw .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kvbzlljqqw .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#kvbzlljqqw .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#kvbzlljqqw .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kvbzlljqqw .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kvbzlljqqw .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#kvbzlljqqw .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kvbzlljqqw .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#kvbzlljqqw .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kvbzlljqqw .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#kvbzlljqqw .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kvbzlljqqw .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#kvbzlljqqw .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kvbzlljqqw .gt_left {\n  text-align: left;\n}\n\n#kvbzlljqqw .gt_center {\n  text-align: center;\n}\n\n#kvbzlljqqw .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#kvbzlljqqw .gt_font_normal {\n  font-weight: normal;\n}\n\n#kvbzlljqqw .gt_font_bold {\n  font-weight: bold;\n}\n\n#kvbzlljqqw .gt_font_italic {\n  font-style: italic;\n}\n\n#kvbzlljqqw .gt_super {\n  font-size: 65%;\n}\n\n#kvbzlljqqw .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#kvbzlljqqw .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#kvbzlljqqw .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#kvbzlljqqw .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#kvbzlljqqw .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#kvbzlljqqw .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#kvbzlljqqw .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#kvbzlljqqw .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#kvbzlljqqw div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"9\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Three Pitch Sequence</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"game_pk\">game_pk</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"at_bat_number\">at_bat_number</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"batter\">batter</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_number\">pitch_number</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_type\">pitch_type</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_category\">pitch_category</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"first_pitch\">first_pitch</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"second_pitch\">second_pitch</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"third_pitch\">third_pitch</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">656582</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">656582</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">656582</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">656582</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">6</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">663647</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">663647</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CH</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">658668</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">658668</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">658668</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">658668</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">6</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">7</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">657041</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CH</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">7</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">657041</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CH</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">9</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">680779</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CH</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">9</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">680779</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">10</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">665833</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CU</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">10</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">665833</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">11</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">572191</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CH</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\nNow we need to begin to construct our transition matrix. Our first step is to create a variable called \"state\", which will bet the first two pitches a batter gets. We then need to determine the counts for each combination of state with third pitch.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstate_counts <- three_pitch_seq %>%\n  mutate(state = paste(first_pitch, second_pitch, sep = \"+\")) %>%\n  count(state, third_pitch)\n\nstate_counts %>% \n  head(5) %>% \n  gt() %>%\n  tab_header(\"Counts by Current State\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"lwbludnaoj\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#lwbludnaoj table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#lwbludnaoj thead, #lwbludnaoj tbody, #lwbludnaoj tfoot, #lwbludnaoj tr, #lwbludnaoj td, #lwbludnaoj th {\n  border-style: none;\n}\n\n#lwbludnaoj p {\n  margin: 0;\n  padding: 0;\n}\n\n#lwbludnaoj .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#lwbludnaoj .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#lwbludnaoj .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#lwbludnaoj .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#lwbludnaoj .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#lwbludnaoj .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lwbludnaoj .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#lwbludnaoj .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#lwbludnaoj .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#lwbludnaoj .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#lwbludnaoj .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#lwbludnaoj .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#lwbludnaoj .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#lwbludnaoj .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#lwbludnaoj .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#lwbludnaoj .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#lwbludnaoj .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#lwbludnaoj .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#lwbludnaoj .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lwbludnaoj .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#lwbludnaoj .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#lwbludnaoj .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#lwbludnaoj .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lwbludnaoj .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#lwbludnaoj .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#lwbludnaoj .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lwbludnaoj .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lwbludnaoj .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#lwbludnaoj .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lwbludnaoj .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#lwbludnaoj .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lwbludnaoj .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#lwbludnaoj .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lwbludnaoj .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#lwbludnaoj .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lwbludnaoj .gt_left {\n  text-align: left;\n}\n\n#lwbludnaoj .gt_center {\n  text-align: center;\n}\n\n#lwbludnaoj .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#lwbludnaoj .gt_font_normal {\n  font-weight: normal;\n}\n\n#lwbludnaoj .gt_font_bold {\n  font-weight: bold;\n}\n\n#lwbludnaoj .gt_font_italic {\n  font-style: italic;\n}\n\n#lwbludnaoj .gt_super {\n  font-size: 65%;\n}\n\n#lwbludnaoj .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#lwbludnaoj .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#lwbludnaoj .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#lwbludnaoj .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#lwbludnaoj .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#lwbludnaoj .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#lwbludnaoj .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#lwbludnaoj .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#lwbludnaoj div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"3\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Counts by Current State</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"state\">state</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"third_pitch\">third_pitch</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"n\">n</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball+Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"n\" class=\"gt_row gt_right\">17216</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball+Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"n\" class=\"gt_row gt_right\">23144</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball+Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"n\" class=\"gt_row gt_right\">3332</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball+Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"n\" class=\"gt_row gt_right\">20444</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball+Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"n\" class=\"gt_row gt_right\">28979</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\nNow using these counts we need to create a contingency table. In order to do this we will use pivot_wider(). Inside pivot_wider(), \"names_from = third_pitch\" forces each unique third_pitch to now become a column. Then, \"values_from = n\" designates what goes inside each column, row combination. Lastly, \"values_fill = 0\" ensures that any missing combinations (e.g. a particular (state, third_pitch) that didn’t occur) get a zero instead of NA. Then, \"column_to_rownames(\"state\")\", moves the state column out of the body and into the row names of the data frame. Then, \"as.matrix\" changes this from a data_frame to a matrix. Lastly, \"prop.table(margin = 1)\", creates proportions such that every row sums to 1.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntransition_matrix <- state_counts %>%\n  pivot_wider(names_from   = third_pitch, values_from  = n, values_fill  = 0) %>%\n  column_to_rownames(\"state\") %>%\n  as.matrix() %>%\n  prop.table(margin = 1)\n\ntransition_matrix\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                            Breaking Ball  Fastball  Off-Speed\nBreaking Ball+Breaking Ball     0.3940309 0.5297080 0.07626110\nBreaking Ball+Fastball          0.3702818 0.5248678 0.10485039\nBreaking Ball+Off-Speed         0.2429973 0.4829345 0.27406826\nFastball+Breaking Ball          0.4019251 0.5063947 0.09168013\nFastball+Fastball               0.2877884 0.5864531 0.12575851\nFastball+Off-Speed              0.1676412 0.5213053 0.31105353\nOff-Speed+Breaking Ball         0.2665959 0.4788350 0.25456904\nOff-Speed+Fastball              0.2168361 0.5054608 0.27770310\nOff-Speed+Off-Speed             0.1767698 0.5554614 0.26776883\n```\n\n\n:::\n:::\n\n\n\n\n::: {.callout-note collapse=\"true\" title=\"Exercise 3\" appearance=\"minimal\"}\nWhat if instead of three- pitch sequences we wanted four pitch sequences. How would the code we ran need to change?\n:::\n\n::: {.callout-note collapse=\"true\" title=\"Exercise 3 Answer Key\" appearance=\"minimal\"}\nThe code below allows for four pitch sequences\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfour_pitch_seq <- pitch_seq %>%\n  group_by(game_pk, at_bat_number) %>% \n  mutate(\n    first_pitch  = lag(pitch_category, 3),\n    second_pitch = lag(pitch_category, 2),\n    third_pitch  = lag(pitch_category, 1),\n    fourth_pitch = pitch_category\n  ) %>%\n  ungroup() %>%\n  filter(!is.na(first_pitch)) %>%\n  select(game_pk, at_bat_number, batter, pitch_number, pitch_type, pitch_category, first_pitch, second_pitch, third_pitch, fourth_pitch)\n\nfour_pitch_seq %>% \n  head(20) %>% \n  gt() %>%\n  tab_header(\"Four Pitch Sequence\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"trncetxfqc\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#trncetxfqc table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#trncetxfqc thead, #trncetxfqc tbody, #trncetxfqc tfoot, #trncetxfqc tr, #trncetxfqc td, #trncetxfqc th {\n  border-style: none;\n}\n\n#trncetxfqc p {\n  margin: 0;\n  padding: 0;\n}\n\n#trncetxfqc .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#trncetxfqc .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#trncetxfqc .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#trncetxfqc .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#trncetxfqc .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#trncetxfqc .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#trncetxfqc .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#trncetxfqc .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#trncetxfqc .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#trncetxfqc .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#trncetxfqc .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#trncetxfqc .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#trncetxfqc .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#trncetxfqc .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#trncetxfqc .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#trncetxfqc .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#trncetxfqc .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#trncetxfqc .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#trncetxfqc .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#trncetxfqc .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#trncetxfqc .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#trncetxfqc .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#trncetxfqc .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#trncetxfqc .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#trncetxfqc .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#trncetxfqc .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#trncetxfqc .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#trncetxfqc .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#trncetxfqc .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#trncetxfqc .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#trncetxfqc .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#trncetxfqc .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#trncetxfqc .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#trncetxfqc .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#trncetxfqc .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#trncetxfqc .gt_left {\n  text-align: left;\n}\n\n#trncetxfqc .gt_center {\n  text-align: center;\n}\n\n#trncetxfqc .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#trncetxfqc .gt_font_normal {\n  font-weight: normal;\n}\n\n#trncetxfqc .gt_font_bold {\n  font-weight: bold;\n}\n\n#trncetxfqc .gt_font_italic {\n  font-style: italic;\n}\n\n#trncetxfqc .gt_super {\n  font-size: 65%;\n}\n\n#trncetxfqc .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#trncetxfqc .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#trncetxfqc .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#trncetxfqc .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#trncetxfqc .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#trncetxfqc .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#trncetxfqc .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#trncetxfqc .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#trncetxfqc div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"10\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Four Pitch Sequence</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"game_pk\">game_pk</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"at_bat_number\">at_bat_number</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"batter\">batter</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_number\">pitch_number</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_type\">pitch_type</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_category\">pitch_category</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"first_pitch\">first_pitch</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"second_pitch\">second_pitch</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"third_pitch\">third_pitch</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"fourth_pitch\">fourth_pitch</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">656582</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Fastball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">656582</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Fastball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">656582</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">6</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Fastball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">663647</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Fastball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Fastball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Breaking Ball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">658668</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Breaking Ball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">658668</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Breaking Ball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">658668</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">6</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Breaking Ball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">7</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">657041</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CH</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Off-Speed</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">9</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">680779</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Fastball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">10</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">665833</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Breaking Ball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">11</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">572191</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Breaking Ball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">13</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">656582</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CU</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Breaking Ball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">15</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">663647</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CH</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Off-Speed</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">16</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">660688</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SI</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Fastball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">18</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">702358</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FC</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Fastball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">18</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">702358</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SI</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Fastball</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">18</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">702358</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">6</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CH</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Off-Speed</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">20</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CU</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Breaking Ball</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\nThen to get the transition matrix run the code below:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstate_counts2 <- four_pitch_seq %>%\n  mutate(state = paste(first_pitch, second_pitch, third_pitch, sep = \"+\")) %>%\n  count(state, fourth_pitch)\n\ntransition_matrix2 <- state_counts2 %>%\n  pivot_wider(names_from   = fourth_pitch, values_from  = n, values_fill  = 0) %>%\n  column_to_rownames(\"state\") %>%\n  as.matrix() %>%\n  prop.table(margin = 1)\n\ntransition_matrix2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                                          Breaking Ball  Fastball  Off-Speed\nBreaking Ball+Breaking Ball+Breaking Ball     0.4378015 0.5134803 0.04871819\nBreaking Ball+Breaking Ball+Fastball          0.4517414 0.4746220 0.07363661\nBreaking Ball+Breaking Ball+Off-Speed         0.3349710 0.4662796 0.19874944\nBreaking Ball+Fastball+Breaking Ball          0.4429975 0.4773862 0.07961634\nBreaking Ball+Fastball+Fastball               0.3952141 0.5117752 0.09301067\nBreaking Ball+Fastball+Off-Speed              0.2813978 0.4863374 0.23226484\nBreaking Ball+Off-Speed+Breaking Ball         0.3023256 0.4934277 0.20424671\nBreaking Ball+Off-Speed+Fastball              0.3054726 0.4587065 0.23582090\nBreaking Ball+Off-Speed+Off-Speed             0.2705061 0.5261780 0.20331588\nFastball+Breaking Ball+Breaking Ball          0.3624684 0.5657702 0.07176142\nFastball+Breaking Ball+Fastball               0.3405492 0.5668355 0.09261530\nFastball+Breaking Ball+Off-Speed              0.2312304 0.5289752 0.23979446\nFastball+Fastball+Breaking Ball               0.3666179 0.5586972 0.07468482\nFastball+Fastball+Fastball                    0.2529704 0.6411483 0.10588128\nFastball+Fastball+Off-Speed                   0.1371494 0.5844116 0.27843908\nFastball+Off-Speed+Breaking Ball              0.2678227 0.5077071 0.22447013\nFastball+Off-Speed+Fastball                   0.2129542 0.5512375 0.23580832\nFastball+Off-Speed+Off-Speed                  0.1700390 0.5981541 0.23180689\nOff-Speed+Breaking Ball+Breaking Ball         0.2708029 0.4722628 0.25693431\nOff-Speed+Breaking Ball+Fastball              0.2840483 0.4369013 0.27905040\nOff-Speed+Breaking Ball+Off-Speed             0.2579643 0.4988345 0.24320124\nOff-Speed+Fastball+Breaking Ball              0.2614907 0.4661491 0.27236025\nOff-Speed+Fastball+Fastball                   0.1979689 0.5056195 0.29641165\nOff-Speed+Fastball+Off-Speed                  0.1637324 0.4979879 0.33827968\nOff-Speed+Off-Speed+Breaking Ball             0.1949414 0.4904380 0.31462060\nOff-Speed+Off-Speed+Fastball                  0.1839566 0.4702453 0.34579815\nOff-Speed+Off-Speed+Off-Speed                 0.1181379 0.5274484 0.35441370\n```\n\n\n:::\n:::\n\n\n\n:::\n\n# Expectancy Matrix\n\nA transition matrix cannot tell you how successful a combination of pitches is, it can only tell you what we have seen as a likely next pitch given the first two. It is much more valuable that we understand the success of a pitch sequence. As we move through this section the main question we will be working to answer is:\n\n-   What third pitch is most successful given the first two.\n\nThe main difference between an expectancy matrix and a transition matrix is that you’re taking averages of success rather than just transition counts.\n\n$$M_{(i,j),k}=\\Pr\\bigl(\\text{success on pitch}_3 = k \\;\\big|\\; \\text{pitch}_1 = i,\\;\\text{pitch}_2 = j\\bigr)$$\n\nTherefore, we want to **assess which 3-pitch sequences show the most promise**. We will do this by **separating consecutive 3-pitch sequences in the data that occurred on the same at bat**. Just as before, this means that a 4-pitch at-bat would create two sets of three, the first three pitches as one \"triplet\" and the last three pitches as a second \"triplet\". After creating these triplets, we will ultimately assess how the first two pitch types influence the **effectiveness** of the third pitch type. For example, maybe two fastballs in a row decrease the effectiveness of a fastball on the third pitch, but a different pair might set up the third-pitch fastball to be more successful.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nthree_pitch_seq_suc <- pitch_seq %>%\n  group_by(game_pk, at_bat_number) %>%\n  mutate(\n    first_pitch = lag(pitch_category, 2),\n    second_pitch = lag(pitch_category, 1),\n    third_pitch = pitch_category,\n    success_3 = success\n  ) %>%\n  ungroup()%>%\n  filter(!is.na(first_pitch)) %>%\n  select(game_pk, at_bat_number, batter, pitch_number, pitch_type, pitch_category, first_pitch, second_pitch, third_pitch, success_3, description, events)\n\nthree_pitch_seq_suc %>% \n  head(20) %>% \n  gt() %>%\n  tab_header(\"Three Pitch Sequence Successes\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"lspeimydpl\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#lspeimydpl table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#lspeimydpl thead, #lspeimydpl tbody, #lspeimydpl tfoot, #lspeimydpl tr, #lspeimydpl td, #lspeimydpl th {\n  border-style: none;\n}\n\n#lspeimydpl p {\n  margin: 0;\n  padding: 0;\n}\n\n#lspeimydpl .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#lspeimydpl .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#lspeimydpl .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#lspeimydpl .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#lspeimydpl .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#lspeimydpl .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lspeimydpl .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#lspeimydpl .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#lspeimydpl .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#lspeimydpl .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#lspeimydpl .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#lspeimydpl .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#lspeimydpl .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#lspeimydpl .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#lspeimydpl .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#lspeimydpl .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#lspeimydpl .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#lspeimydpl .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#lspeimydpl .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lspeimydpl .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#lspeimydpl .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#lspeimydpl .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#lspeimydpl .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lspeimydpl .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#lspeimydpl .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#lspeimydpl .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lspeimydpl .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lspeimydpl .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#lspeimydpl .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lspeimydpl .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#lspeimydpl .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lspeimydpl .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#lspeimydpl .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lspeimydpl .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#lspeimydpl .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lspeimydpl .gt_left {\n  text-align: left;\n}\n\n#lspeimydpl .gt_center {\n  text-align: center;\n}\n\n#lspeimydpl .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#lspeimydpl .gt_font_normal {\n  font-weight: normal;\n}\n\n#lspeimydpl .gt_font_bold {\n  font-weight: bold;\n}\n\n#lspeimydpl .gt_font_italic {\n  font-style: italic;\n}\n\n#lspeimydpl .gt_super {\n  font-size: 65%;\n}\n\n#lspeimydpl .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#lspeimydpl .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#lspeimydpl .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#lspeimydpl .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#lspeimydpl .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#lspeimydpl .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#lspeimydpl .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#lspeimydpl .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#lspeimydpl div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"12\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Three Pitch Sequence Successes</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"game_pk\">game_pk</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"at_bat_number\">at_bat_number</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"batter\">batter</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_number\">pitch_number</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_type\">pitch_type</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_category\">pitch_category</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"first_pitch\">first_pitch</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"second_pitch\">second_pitch</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"third_pitch\">third_pitch</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"success_3\">success_3</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"description\">description</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"events\">events</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">656582</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"success_3\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">foul</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">656582</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"success_3\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">ball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">656582</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"success_3\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">ball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">656582</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">6</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"success_3\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">hit_into_play</td>\n<td headers=\"events\" class=\"gt_row gt_left\">field_out</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">663647</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"success_3\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">ball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">663647</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"success_3\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">ball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">walk</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CH</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"success_3\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">called_strike</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"success_3\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">foul</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"success_3\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">swinging_strike</td>\n<td headers=\"events\" class=\"gt_row gt_left\">strikeout</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">658668</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"success_3\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">ball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">658668</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"success_3\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">swinging_strike</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">658668</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"success_3\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">ball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">658668</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">6</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"success_3\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">swinging_strike</td>\n<td headers=\"events\" class=\"gt_row gt_left\">strikeout</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">7</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">657041</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CH</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"success_3\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">swinging_strike</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">7</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">657041</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CH</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"success_3\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">hit_into_play</td>\n<td headers=\"events\" class=\"gt_row gt_left\">field_out</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">9</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">680779</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CH</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"success_3\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">swinging_strike</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">9</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">680779</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"success_3\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">hit_into_play</td>\n<td headers=\"events\" class=\"gt_row gt_left\">double</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">10</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">665833</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CU</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"success_3\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">called_strike</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">10</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">665833</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"success_3\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">hit_into_play</td>\n<td headers=\"events\" class=\"gt_row gt_left\">single</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">11</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">572191</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CH</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"success_3\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">swinging_strike</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\n::: column-margin\n**Consideration:** You may notice that our 4th row was considered not a success because the ball was hit into play. However, the result of the play was a field out. This is a point of possible further research.\n:::\n\nNow it is time to **build the expectancy matrix**, we will do so by first combining all two-pitch pairs with the third pitch using the group_by() function. Then we create a new variable, success rate, using the summarise() function, which allows us to get the proportion of success (.groups = \"drop\" works the same way as ungroup()).Lastly, we need to create our state variable like we did for the transition matrix and use pivot_wider to get the variables of interest displayed appropriately.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexpectancy_matrix <- three_pitch_seq_suc %>%\n  group_by(first_pitch, second_pitch, third_pitch) %>%\n  summarise(success_rate = mean(success_3), .groups = \"drop\") %>%\n  mutate(state = paste(first_pitch, \"+\", second_pitch)) %>%\n  select(state, third_pitch, success_rate) %>%\n  pivot_wider(names_from = third_pitch, values_from = success_rate, values_fill = 0)\n\nexpectancy_matrix %>% \n    gt() %>%\n  tab_header(\"Three Pitch Sequence Expectancy Matrix\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"usykecwhmh\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#usykecwhmh table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#usykecwhmh thead, #usykecwhmh tbody, #usykecwhmh tfoot, #usykecwhmh tr, #usykecwhmh td, #usykecwhmh th {\n  border-style: none;\n}\n\n#usykecwhmh p {\n  margin: 0;\n  padding: 0;\n}\n\n#usykecwhmh .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#usykecwhmh .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#usykecwhmh .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#usykecwhmh .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#usykecwhmh .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#usykecwhmh .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#usykecwhmh .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#usykecwhmh .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#usykecwhmh .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#usykecwhmh .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#usykecwhmh .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#usykecwhmh .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#usykecwhmh .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#usykecwhmh .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#usykecwhmh .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#usykecwhmh .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#usykecwhmh .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#usykecwhmh .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#usykecwhmh .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#usykecwhmh .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#usykecwhmh .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#usykecwhmh .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#usykecwhmh .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#usykecwhmh .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#usykecwhmh .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#usykecwhmh .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#usykecwhmh .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#usykecwhmh .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#usykecwhmh .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#usykecwhmh .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#usykecwhmh .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#usykecwhmh .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#usykecwhmh .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#usykecwhmh .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#usykecwhmh .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#usykecwhmh .gt_left {\n  text-align: left;\n}\n\n#usykecwhmh .gt_center {\n  text-align: center;\n}\n\n#usykecwhmh .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#usykecwhmh .gt_font_normal {\n  font-weight: normal;\n}\n\n#usykecwhmh .gt_font_bold {\n  font-weight: bold;\n}\n\n#usykecwhmh .gt_font_italic {\n  font-style: italic;\n}\n\n#usykecwhmh .gt_super {\n  font-size: 65%;\n}\n\n#usykecwhmh .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#usykecwhmh .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#usykecwhmh .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#usykecwhmh .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#usykecwhmh .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#usykecwhmh .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#usykecwhmh .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#usykecwhmh .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#usykecwhmh div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"4\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Three Pitch Sequence Expectancy Matrix</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"state\">state</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Breaking-Ball\">Breaking Ball</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Fastball\">Fastball</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Off-Speed\">Off-Speed</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Breaking Ball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4466194</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4557121</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4111645</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Fastball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4202700</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4886297</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.3878045</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Off-Speed</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4565709</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4524777</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4159748</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Fastball + Breaking Ball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4471613</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4648744</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.3992291</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Fastball + Fastball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4248615</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4855097</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.3772235</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Fastball + Off-Speed</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4477861</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4667204</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4218820</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Off-Speed + Breaking Ball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4688191</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4501354</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4201019</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Off-Speed + Fastball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4411081</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4792654</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.3961579</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Off-Speed + Off-Speed</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4688249</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4390740</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4179420</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\n::: {.callout-note title=\"**Question: Interpret the expectancy matrix**\" appearance=\"minimal\"}\nWhat does the value in the first row and first column mean?\n\nWhat's the probability of success of a fastball thrown after two other fastballs?\n:::\n\n::: {.callout-note collapse=\"true\" title=\"**Answer:**\" appearance=\"minimal\"}\nThis value represents the proportion of successful breaking balls thrown after two consecutive breaking balls previously.\n\nThe probability of success of a fastball thrown after two fastballs is approximately 48.6%.\n:::\n\n::: {.callout-note collapse=\"true\" title=\"Exercise 4\" appearance=\"minimal\"}\nWhat if instead of three- pitch sequences we wanted four pitch sequences. How would the code we ran need to change?\n:::\n\n::: {.callout-note collapse=\"true\" title=\"Exercise 4 Answer Key\" appearance=\"minimal\"}\nThe code below allows for four pitch sequences\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfour_pitch_seq_suc <- pitch_seq %>%\n  group_by(game_pk, at_bat_number) %>% \n  mutate(\n    first_pitch  = lag(pitch_category, 3),\n    second_pitch = lag(pitch_category, 2),\n    third_pitch  = lag(pitch_category, 1),\n    fourth_pitch = pitch_category,\n    success_4 = success\n  ) %>%\n  ungroup() %>%\n  filter(!is.na(first_pitch)) %>%\n  select(game_pk, at_bat_number, batter, pitch_number, pitch_type, pitch_category, first_pitch, second_pitch, third_pitch, fourth_pitch, success_4, description, events)\n\nfour_pitch_seq_suc %>% \n  head(20) %>% \n  gt() %>%\n  tab_header(\"Four Pitch Sequence Successes\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"domkaoffsa\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#domkaoffsa table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#domkaoffsa thead, #domkaoffsa tbody, #domkaoffsa tfoot, #domkaoffsa tr, #domkaoffsa td, #domkaoffsa th {\n  border-style: none;\n}\n\n#domkaoffsa p {\n  margin: 0;\n  padding: 0;\n}\n\n#domkaoffsa .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#domkaoffsa .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#domkaoffsa .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#domkaoffsa .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#domkaoffsa .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#domkaoffsa .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#domkaoffsa .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#domkaoffsa .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#domkaoffsa .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#domkaoffsa .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#domkaoffsa .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#domkaoffsa .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#domkaoffsa .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#domkaoffsa .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#domkaoffsa .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#domkaoffsa .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#domkaoffsa .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#domkaoffsa .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#domkaoffsa .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#domkaoffsa .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#domkaoffsa .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#domkaoffsa .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#domkaoffsa .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#domkaoffsa .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#domkaoffsa .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#domkaoffsa .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#domkaoffsa .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#domkaoffsa .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#domkaoffsa .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#domkaoffsa .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#domkaoffsa .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#domkaoffsa .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#domkaoffsa .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#domkaoffsa .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#domkaoffsa .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#domkaoffsa .gt_left {\n  text-align: left;\n}\n\n#domkaoffsa .gt_center {\n  text-align: center;\n}\n\n#domkaoffsa .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#domkaoffsa .gt_font_normal {\n  font-weight: normal;\n}\n\n#domkaoffsa .gt_font_bold {\n  font-weight: bold;\n}\n\n#domkaoffsa .gt_font_italic {\n  font-style: italic;\n}\n\n#domkaoffsa .gt_super {\n  font-size: 65%;\n}\n\n#domkaoffsa .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#domkaoffsa .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#domkaoffsa .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#domkaoffsa .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#domkaoffsa .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#domkaoffsa .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#domkaoffsa .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#domkaoffsa .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#domkaoffsa div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"13\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Four Pitch Sequence Successes</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"game_pk\">game_pk</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"at_bat_number\">at_bat_number</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"batter\">batter</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_number\">pitch_number</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_type\">pitch_type</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_category\">pitch_category</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"first_pitch\">first_pitch</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"second_pitch\">second_pitch</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"third_pitch\">third_pitch</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"fourth_pitch\">fourth_pitch</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"success_4\">success_4</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"description\">description</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"events\">events</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">656582</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"success_4\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">ball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">656582</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"success_4\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">ball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">1</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">656582</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">6</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"success_4\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">hit_into_play</td>\n<td headers=\"events\" class=\"gt_row gt_left\">field_out</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">3</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">663647</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"success_4\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">ball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">walk</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"success_4\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">foul</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"success_4\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">swinging_strike</td>\n<td headers=\"events\" class=\"gt_row gt_left\">strikeout</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">658668</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"success_4\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">swinging_strike</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">658668</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"success_4\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">ball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">658668</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">6</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"success_4\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">swinging_strike</td>\n<td headers=\"events\" class=\"gt_row gt_left\">strikeout</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">7</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">657041</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CH</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"success_4\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">hit_into_play</td>\n<td headers=\"events\" class=\"gt_row gt_left\">field_out</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">9</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">680779</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FF</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"success_4\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">hit_into_play</td>\n<td headers=\"events\" class=\"gt_row gt_left\">double</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">10</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">665833</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"success_4\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">hit_into_play</td>\n<td headers=\"events\" class=\"gt_row gt_left\">single</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">11</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">572191</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SL</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"success_4\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">hit_into_play</td>\n<td headers=\"events\" class=\"gt_row gt_left\">sac_fly</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">13</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">656582</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CU</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"success_4\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">hit_by_pitch</td>\n<td headers=\"events\" class=\"gt_row gt_left\">hit_by_pitch</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">15</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">663647</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CH</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"success_4\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">hit_into_play</td>\n<td headers=\"events\" class=\"gt_row gt_left\">field_out</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">16</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">660688</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SI</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"success_4\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">hit_into_play</td>\n<td headers=\"events\" class=\"gt_row gt_left\">field_out</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">18</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">702358</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">FC</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"success_4\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">ball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">18</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">702358</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">5</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">SI</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"success_4\" class=\"gt_row gt_right\">1</td>\n<td headers=\"description\" class=\"gt_row gt_left\">foul</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">18</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">702358</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">6</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CH</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"success_4\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">hit_into_play</td>\n<td headers=\"events\" class=\"gt_row gt_left\">single</td></tr>\n    <tr><td headers=\"game_pk\" class=\"gt_row gt_right\">744875</td>\n<td headers=\"at_bat_number\" class=\"gt_row gt_right\">20</td>\n<td headers=\"batter\" class=\"gt_row gt_right\">457705</td>\n<td headers=\"pitch_number\" class=\"gt_row gt_right\">4</td>\n<td headers=\"pitch_type\" class=\"gt_row gt_left\">CU</td>\n<td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"first_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"second_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"fourth_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"success_4\" class=\"gt_row gt_right\">0</td>\n<td headers=\"description\" class=\"gt_row gt_left\">ball</td>\n<td headers=\"events\" class=\"gt_row gt_left\">NA</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\nThen to get the expectancy matrix run the code below:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexpectancy_matrix2 <- four_pitch_seq_suc %>%\n  group_by(first_pitch, second_pitch, third_pitch, fourth_pitch) %>%\n  summarise(success_rate = mean(success_4), .groups = \"drop\") %>%\n  mutate(state = paste(first_pitch, \"+\", second_pitch, \"+\", third_pitch)) %>%\n  select(state, fourth_pitch, success_rate) %>%\n  pivot_wider(names_from = fourth_pitch, values_from = success_rate, values_fill = 0)\n\nexpectancy_matrix2 %>% \n  gt() %>%\n  tab_header(\"Four Pitch Sequence Expectancy Matrix\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"miplbxkfae\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#miplbxkfae table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#miplbxkfae thead, #miplbxkfae tbody, #miplbxkfae tfoot, #miplbxkfae tr, #miplbxkfae td, #miplbxkfae th {\n  border-style: none;\n}\n\n#miplbxkfae p {\n  margin: 0;\n  padding: 0;\n}\n\n#miplbxkfae .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#miplbxkfae .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#miplbxkfae .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#miplbxkfae .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#miplbxkfae .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#miplbxkfae .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#miplbxkfae .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#miplbxkfae .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#miplbxkfae .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#miplbxkfae .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#miplbxkfae .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#miplbxkfae .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#miplbxkfae .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#miplbxkfae .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#miplbxkfae .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#miplbxkfae .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#miplbxkfae .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#miplbxkfae .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#miplbxkfae .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#miplbxkfae .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#miplbxkfae .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#miplbxkfae .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#miplbxkfae .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#miplbxkfae .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#miplbxkfae .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#miplbxkfae .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#miplbxkfae .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#miplbxkfae .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#miplbxkfae .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#miplbxkfae .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#miplbxkfae .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#miplbxkfae .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#miplbxkfae .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#miplbxkfae .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#miplbxkfae .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#miplbxkfae .gt_left {\n  text-align: left;\n}\n\n#miplbxkfae .gt_center {\n  text-align: center;\n}\n\n#miplbxkfae .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#miplbxkfae .gt_font_normal {\n  font-weight: normal;\n}\n\n#miplbxkfae .gt_font_bold {\n  font-weight: bold;\n}\n\n#miplbxkfae .gt_font_italic {\n  font-style: italic;\n}\n\n#miplbxkfae .gt_super {\n  font-size: 65%;\n}\n\n#miplbxkfae .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#miplbxkfae .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#miplbxkfae .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#miplbxkfae .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#miplbxkfae .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#miplbxkfae .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#miplbxkfae .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#miplbxkfae .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#miplbxkfae div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"4\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Four Pitch Sequence Expectancy Matrix</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"state\">state</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Breaking-Ball\">Breaking Ball</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Fastball\">Fastball</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Off-Speed\">Off-Speed</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Breaking Ball + Breaking Ball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4563526</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4443626</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4019417</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Breaking Ball + Fastball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4294039</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.5028441</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4014665</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Breaking Ball + Off-Speed</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4560000</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4741379</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.3797753</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Fastball + Breaking Ball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4569618</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4776217</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4045054</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Fastball + Fastball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4346575</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4922247</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.3707800</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Fastball + Off-Speed</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4537815</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4619125</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4276018</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Off-Speed + Breaking Ball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4983278</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4528689</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4430693</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Off-Speed + Fastball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4576547</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.5005423</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4145570</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Off-Speed + Off-Speed</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4838710</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4187396</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4098712</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Fastball + Breaking Ball + Breaking Ball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4560147</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4531121</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.3933210</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Fastball + Breaking Ball + Fastball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4145921</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4871602</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.3886010</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Fastball + Breaking Ball + Off-Speed</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4456790</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4522396</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4261905</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Fastball + Fastball + Breaking Ball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4504112</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4655384</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4189602</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Fastball + Fastball + Fastball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4247964</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4927516</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.3779459</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Fastball + Fastball + Off-Speed</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4377358</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4677648</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4412639</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Fastball + Off-Speed + Breaking Ball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4496403</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4427577</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4206009</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Fastball + Off-Speed + Fastball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4401583</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4791746</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4104511</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Fastball + Off-Speed + Off-Speed</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4634656</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4394659</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4441041</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Off-Speed + Breaking Ball + Breaking Ball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.5094340</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4853168</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4090909</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Off-Speed + Breaking Ball + Fastball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4516129</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4652050</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4149254</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Off-Speed + Breaking Ball + Off-Speed</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4789157</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4345794</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4536741</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Off-Speed + Fastball + Breaking Ball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4821853</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4556962</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4047891</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Off-Speed + Fastball + Fastball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4705882</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4951794</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.3841937</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Off-Speed + Fastball + Off-Speed</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4685100</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4737374</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4356877</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Off-Speed + Off-Speed + Breaking Ball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4905063</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4377358</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4137255</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Off-Speed + Off-Speed + Fastball</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4251366</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4801197</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.3796512</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Off-Speed + Off-Speed + Off-Speed</td>\n<td headers=\"Breaking Ball\" class=\"gt_row gt_right\">0.4460967</td>\n<td headers=\"Fastball\" class=\"gt_row gt_right\">0.4529559</td>\n<td headers=\"Off-Speed\" class=\"gt_row gt_right\">0.4151177</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n:::\n\nWhile pitchers likely care most about the probability of success, it is useful in answering our research question of whether pitch sequencing matters to investigate the multiplying effect sequences have on success. This will include assessing the success probability of each pitch category overall, and then seeing if any of the cells in our previous expectancy matrix deviate significantly from their overall success value.\n\nTo comment on an increase in effectiveness for the third pitch type, we need to **calculate each pitch category's effectiveness overall** in the data (we will call this baseline_success):\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncategory_success <- pitches_clean %>%\n  group_by(pitch_category) %>%\n  summarise(total_pitches = n(), baseline_success = mean(success)) %>%\n  arrange(desc(baseline_success))\n\ncategory_success %>% \n    gt() %>%\n  tab_header(\"Success Rate by Pitch Category\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"icihxvakag\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#icihxvakag table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#icihxvakag thead, #icihxvakag tbody, #icihxvakag tfoot, #icihxvakag tr, #icihxvakag td, #icihxvakag th {\n  border-style: none;\n}\n\n#icihxvakag p {\n  margin: 0;\n  padding: 0;\n}\n\n#icihxvakag .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#icihxvakag .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#icihxvakag .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#icihxvakag .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#icihxvakag .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#icihxvakag .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#icihxvakag .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#icihxvakag .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#icihxvakag .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#icihxvakag .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#icihxvakag .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#icihxvakag .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#icihxvakag .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#icihxvakag .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#icihxvakag .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#icihxvakag .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#icihxvakag .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#icihxvakag .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#icihxvakag .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#icihxvakag .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#icihxvakag .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#icihxvakag .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#icihxvakag .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#icihxvakag .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#icihxvakag .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#icihxvakag .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#icihxvakag .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#icihxvakag .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#icihxvakag .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#icihxvakag .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#icihxvakag .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#icihxvakag .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#icihxvakag .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#icihxvakag .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#icihxvakag .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#icihxvakag .gt_left {\n  text-align: left;\n}\n\n#icihxvakag .gt_center {\n  text-align: center;\n}\n\n#icihxvakag .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#icihxvakag .gt_font_normal {\n  font-weight: normal;\n}\n\n#icihxvakag .gt_font_bold {\n  font-weight: bold;\n}\n\n#icihxvakag .gt_font_italic {\n  font-style: italic;\n}\n\n#icihxvakag .gt_super {\n  font-size: 65%;\n}\n\n#icihxvakag .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#icihxvakag .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#icihxvakag .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#icihxvakag .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#icihxvakag .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#icihxvakag .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#icihxvakag .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#icihxvakag .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#icihxvakag div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"3\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Success Rate by Pitch Category</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pitch_category\">pitch_category</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"total_pitches\">total_pitches</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"baseline_success\">baseline_success</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"pitch_category\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">393489</td>\n<td headers=\"baseline_success\" class=\"gt_row gt_right\">0.4849157</td></tr>\n    <tr><td headers=\"pitch_category\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">215751</td>\n<td headers=\"baseline_success\" class=\"gt_row gt_right\">0.4615784</td></tr>\n    <tr><td headers=\"pitch_category\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"total_pitches\" class=\"gt_row gt_right\">94700</td>\n<td headers=\"baseline_success\" class=\"gt_row gt_right\">0.4081098</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\n::: {.callout-note title=\"**Question:**\" appearance=\"minimal\"}\nAre some pitches more successful than others overall?\n:::\n\n::: {.callout-note collapse=\"true\" title=\"**Answer:**\" appearance=\"minimal\"}\nIt appears that the fastball is most effective at about 48.5%, followed by the breaking ball at 46.2% and off-speed at 40.8%, respectively.\n:::\n\nNow we will investigate if these success probabilities change significantly based on the previous two pitches thrown. While we investiagate this we will also learn how to make visualizations.\n\n# Creating a Heat Map\n\nAs we work through this next section, consider:\n\n-   What is a heat map?\n-   What do you think a heat map displays?\n\nNow that we have our expectancy matrix, let's show it off using a heat map! First, we will reorient the data for ease of use. (We are essentially undoing pivot_wider by using pivot_longer)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Step 1: Reshape to long format\nlong_matrix <- expectancy_matrix %>%\n  pivot_longer(cols = -state, names_to = \"third_pitch\", values_to = \"success_rate\")\n\nlong_matrix %>% \n  head(10) %>% \n  gt() %>%\n  tab_header(\"Three Pitch Sequence Successes\", \"Using pivot_longer\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"zmeecyywxs\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#zmeecyywxs table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#zmeecyywxs thead, #zmeecyywxs tbody, #zmeecyywxs tfoot, #zmeecyywxs tr, #zmeecyywxs td, #zmeecyywxs th {\n  border-style: none;\n}\n\n#zmeecyywxs p {\n  margin: 0;\n  padding: 0;\n}\n\n#zmeecyywxs .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#zmeecyywxs .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#zmeecyywxs .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#zmeecyywxs .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#zmeecyywxs .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#zmeecyywxs .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zmeecyywxs .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#zmeecyywxs .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#zmeecyywxs .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#zmeecyywxs .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#zmeecyywxs .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#zmeecyywxs .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#zmeecyywxs .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#zmeecyywxs .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#zmeecyywxs .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#zmeecyywxs .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#zmeecyywxs .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#zmeecyywxs .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#zmeecyywxs .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zmeecyywxs .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#zmeecyywxs .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#zmeecyywxs .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#zmeecyywxs .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zmeecyywxs .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#zmeecyywxs .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#zmeecyywxs .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zmeecyywxs .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zmeecyywxs .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#zmeecyywxs .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zmeecyywxs .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#zmeecyywxs .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zmeecyywxs .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#zmeecyywxs .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zmeecyywxs .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#zmeecyywxs .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zmeecyywxs .gt_left {\n  text-align: left;\n}\n\n#zmeecyywxs .gt_center {\n  text-align: center;\n}\n\n#zmeecyywxs .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#zmeecyywxs .gt_font_normal {\n  font-weight: normal;\n}\n\n#zmeecyywxs .gt_font_bold {\n  font-weight: bold;\n}\n\n#zmeecyywxs .gt_font_italic {\n  font-style: italic;\n}\n\n#zmeecyywxs .gt_super {\n  font-size: 65%;\n}\n\n#zmeecyywxs .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#zmeecyywxs .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#zmeecyywxs .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#zmeecyywxs .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#zmeecyywxs .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#zmeecyywxs .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#zmeecyywxs .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#zmeecyywxs .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#zmeecyywxs div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"3\" class=\"gt_heading gt_title gt_font_normal\" style>Three Pitch Sequence Successes</td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"3\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style>Using pivot_longer</td>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"state\">state</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"third_pitch\">third_pitch</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"success_rate\">success_rate</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4466194</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4557121</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4111645</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4202700</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4886297</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.3878045</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Off-Speed</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4565709</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Off-Speed</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4524777</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Off-Speed</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4159748</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Fastball + Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4471613</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\nWe are going to create a new variable we have dubbed \"success_lift\" by measuring how much the two pitch sequences \"lift\" the probability of success. To determine this lifting effect, we will divide the new success rate by the overall success rate for the given third pitch category. Thus, a value above 1 would mean it improves success likelihood, and a value below 1 means it decreases success likelihood. This will help us evaluate what 2-pitch sequences have the greatest effect on possibly \"tricking\" the batter at the third pitch.\n\nIn order to have all of the information we want in one dataframe, we need to combine our category_success dataframe to our long_matrix. The function left_join() allows us to combine dataframes as long as one column is the same in both. For us our column \"third_pitch\" in the long_matrix is the same as \"pitch_category\" in the category_success dataframe. Within left_join we are also able to select only the columns pitch_category and baseline_success from category_success. Lastly, using mutate() we are able to create our new variable of interest success_lift.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlong_matrix_lift <- long_matrix %>%\n  left_join(category_success %>% select(pitch_category, baseline_success),\n            by = c(\"third_pitch\" = \"pitch_category\")) %>%\n  mutate(success_lift = success_rate / baseline_success)\n\nlong_matrix_lift %>% \n  head(5) %>% \n  gt() %>%\n  tab_header(\"Three Pitch Sequence Successes Lift\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"efmspiiwnw\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#efmspiiwnw table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#efmspiiwnw thead, #efmspiiwnw tbody, #efmspiiwnw tfoot, #efmspiiwnw tr, #efmspiiwnw td, #efmspiiwnw th {\n  border-style: none;\n}\n\n#efmspiiwnw p {\n  margin: 0;\n  padding: 0;\n}\n\n#efmspiiwnw .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#efmspiiwnw .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#efmspiiwnw .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#efmspiiwnw .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#efmspiiwnw .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#efmspiiwnw .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#efmspiiwnw .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#efmspiiwnw .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#efmspiiwnw .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#efmspiiwnw .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#efmspiiwnw .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#efmspiiwnw .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#efmspiiwnw .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#efmspiiwnw .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#efmspiiwnw .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#efmspiiwnw .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#efmspiiwnw .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#efmspiiwnw .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#efmspiiwnw .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#efmspiiwnw .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#efmspiiwnw .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#efmspiiwnw .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#efmspiiwnw .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#efmspiiwnw .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#efmspiiwnw .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#efmspiiwnw .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#efmspiiwnw .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#efmspiiwnw .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#efmspiiwnw .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#efmspiiwnw .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#efmspiiwnw .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#efmspiiwnw .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#efmspiiwnw .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#efmspiiwnw .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#efmspiiwnw .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#efmspiiwnw .gt_left {\n  text-align: left;\n}\n\n#efmspiiwnw .gt_center {\n  text-align: center;\n}\n\n#efmspiiwnw .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#efmspiiwnw .gt_font_normal {\n  font-weight: normal;\n}\n\n#efmspiiwnw .gt_font_bold {\n  font-weight: bold;\n}\n\n#efmspiiwnw .gt_font_italic {\n  font-style: italic;\n}\n\n#efmspiiwnw .gt_super {\n  font-size: 65%;\n}\n\n#efmspiiwnw .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#efmspiiwnw .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#efmspiiwnw .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#efmspiiwnw .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#efmspiiwnw .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#efmspiiwnw .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#efmspiiwnw .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#efmspiiwnw .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#efmspiiwnw div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"5\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Three Pitch Sequence Successes Lift</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"state\">state</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"third_pitch\">third_pitch</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"success_rate\">success_rate</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"baseline_success\">baseline_success</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"success_lift\">success_lift</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4466194</td>\n<td headers=\"baseline_success\" class=\"gt_row gt_right\">0.4615784</td>\n<td headers=\"success_lift\" class=\"gt_row gt_right\">0.9675917</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4557121</td>\n<td headers=\"baseline_success\" class=\"gt_row gt_right\">0.4849157</td>\n<td headers=\"success_lift\" class=\"gt_row gt_right\">0.9397758</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Breaking Ball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Off-Speed</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4111645</td>\n<td headers=\"baseline_success\" class=\"gt_row gt_right\">0.4081098</td>\n<td headers=\"success_lift\" class=\"gt_row gt_right\">1.0074849</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Breaking Ball</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4202700</td>\n<td headers=\"baseline_success\" class=\"gt_row gt_right\">0.4615784</td>\n<td headers=\"success_lift\" class=\"gt_row gt_right\">0.9105062</td></tr>\n    <tr><td headers=\"state\" class=\"gt_row gt_left\">Breaking Ball + Fastball</td>\n<td headers=\"third_pitch\" class=\"gt_row gt_left\">Fastball</td>\n<td headers=\"success_rate\" class=\"gt_row gt_right\">0.4886297</td>\n<td headers=\"baseline_success\" class=\"gt_row gt_right\">0.4849157</td>\n<td headers=\"success_lift\" class=\"gt_row gt_right\">1.0076590</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\nNow rather than displaying this information in a table, lets create a heat map!\n\nIn order to create a heat map, we begin by using ggplot(). Inside ggplot() we first list the dataframe we are using, then within aes() we provide the variable on the x, y, and color/fill. To get a heatmap specifically, we need to use geom_tile(). Inside geom_tile(), \"color = \"white\" is putting a white border around each tile. Then, scale_fill_gradient2() is creating a legend for the fill variable. Within scale_fill_gradient2() we are designating red for low values observed for success_lift, white for middle values which we designate as 1, and high values of blue. Lastly, name allows us to change the title above the legend. The labs() function allows you to change the x and y axis lables as well as the overall title. Theme_minimal is a common thematic choice that many in the R community choose to make, but there are many ggplot() themes a user can choose to use. Lastly, theme() is used to add a 45 degree angle to the x-variable labels. Again this is a thematic choice and not necessary or desired by every user.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(long_matrix_lift, aes(x = third_pitch, y = state, fill = success_lift)) +\n  geom_tile(color = \"white\") +\n  scale_fill_gradient2(low = \"red\", mid = \"white\", high = \"blue\", \n                       midpoint = 1, name = \"Success Lift\") +\n  labs(x = \"Third Pitch (Category)\", y = \"First + Second Pitch (Sequence)\", \n    title = \"Relative Effectiveness of 3-Pitch Sequences\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-30-1.png){width=672}\n:::\n:::\n\n\n\n\nThe heat map above shows us that the greatest lifting effect comes through an Breaking Ball + Off-Speed paired with a Breaking Ball for the third pitch, roughly increasing success probability by 40%. The worst lifting effect was seen in the Breaking Ball + Breaking Ball paired with an Off-Speed for the third pitch, which decreases success probability by about 20%.\n\n::: {.callout-note collapse=\"true\" title=\"**Discussion Questions**\" appearance=\"minimal\"}\n-   Interpret the heat map. What pitch sequences appear to have little effect on the success of the third pitch?\n\n-   What would cause some pitch sequence success probabilities to be so high? What factors in baseball terms? What about viewing this from a statistical lens?\n\n-   How might our imbalanced pitch counts effect the strength of our findings?\n:::\n\n::: {.callout-note collapse=\"true\" title=\"Exercise 5\" appearance=\"minimal\"}\nChange the code from above in the following ways: - Change the border color to black. - Switch the legend such that blue is low and red is high - Remove the last two theme elements.\n\nConsider if you like or dislike the changes.\n:::\n\n::: {.callout-note collapse=\"true\" title=\"Exercise 5 Answer Key\" appearance=\"minimal\"}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(long_matrix_lift, aes(x = third_pitch, y = state, fill = success_lift)) +\n  geom_tile(color = \"black\") +\n  scale_fill_gradient2(low = \"blue\", mid = \"white\", high = \"red\", \n                       midpoint = 1, name = \"Success Lift\") +\n  labs(x = \"Third Pitch (Category)\", y = \"First + Second Pitch (Sequence)\", \n    title = \"Relative Effectiveness of 3-Pitch Sequences\") \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-31-1.png){width=672}\n:::\n:::\n\n\n\n:::\n\nWe have an initial glimpse into the lifting effects of each 3-pitch sequence, but pitchers are likely more concerned with what will give them the greatest probability of success, not the greatest lifting effect. We will create a very similar heat map but rather than the lifting effect, we will provide the **raw success probability** on the third pitch for a particular 3-pitch sequence.\n\nThe main change that needed to be made from the previous code was changing \"fill = success_lift\" to \"fill = success_rate\".\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(long_matrix_lift, aes(x = third_pitch, y = state, fill = success_rate)) +\n  geom_tile(color = \"white\") +\n  scale_fill_gradient2(low = \"red\", mid = \"white\", high = \"blue\", \n                       midpoint = 0.45, name = \"Success Probability (x)\") +\n  labs(x = \"Third Pitch (Category)\", y = \"First + Second Pitch (Sequence)\", \n    title = \"Effectiveness of 3-Pitch Sequences\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-32-1.png){width=672}\n:::\n:::\n\n\n\n\nWe want to **ensure that these effects we observe are significant**. Before doing a complex test we can assess whether there are a sufficient amount of observed triplets and not just an odd few that create this effect.\n\nRealize that the code below to create the count_matrix is almost the exact same as the expectancy matrix from earlier with the main difference being we are interested in counts rather than proportions. Also, the only change we made for the heat map was adding \"geom_text(aes(label = count), size = 4)\". This function call allows for the values to be placed within each tile.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncount_matrix <- three_pitch_seq %>%\n  group_by(first_pitch, second_pitch, third_pitch) %>%\n  summarise(count = n(), .groups = \"drop\") %>%\n  mutate(state = paste(first_pitch, \"+\", second_pitch)) %>%\n  select(state, third_pitch, count)\n\nggplot(count_matrix, aes(x = third_pitch, y = state, fill = count)) +\n  geom_tile(color = \"white\") + \n  geom_text(aes(label = count), size = 4) +\n  scale_fill_gradient2(name = \"Count\") +\n  labs(x = \"Third Pitch (Category)\", y = \"First + Second Pitch (Sequence)\", \n    title = \"Number of Valid Observed 3-Pitch Sequences\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-33-1.png){width=672}\n:::\n:::\n\n\n\n\nFrom this initial look, we can see that it looks like we have a large number of observations with the smallest being 2159 for Off-Speed + Breaking Ball Paired with Off-Speed.\n\nNow that we have looked at some visualizations and continued to expand our understanding of the data, our next step will be to create a **logistic regression model**.\n\n::: {.callout-note collapse=\"true\" title=\"Exercise 6\" appearance=\"minimal\"}\nRerun the heat map for success probability from earlier in this section but add a line of code so that you can see the proportions in each tile. (Hint: make sure to use the rounding function, round(), to improve the visual).\n:::\n\n::: {.callout-note collapse=\"true\" title=\"Exercise 6 Answer Key\" appearance=\"minimal\"}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(long_matrix_lift, aes(x = third_pitch, y = state, fill = success_rate)) +\n  geom_tile(color = \"white\") +\n  geom_text(aes(label = round(success_rate, 2)), size = 4) +\n  scale_fill_gradient2(low = \"red\", mid = \"white\", high = \"blue\", \n                       midpoint = 0.45, name = \"Success Probability (x)\") +\n  labs(x = \"Third Pitch (Category)\", y = \"First + Second Pitch (Sequence)\", \n    title = \"Effectiveness of 3-Pitch Sequences\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-34-1.png){width=672}\n:::\n:::\n\n\n\n:::\n\n# Logistic Regression\n\nLogistic regression is a way to effectively model binary outcomes. In our case, these outcomes are either **success** or **failure** from the pitcher's perspective. The output of a logistic regression, in the form of log odds, is transformed back to a probability between 0 and 1, with '1' representing a **success**.\n\nThe validity conditions for logistic regression include [independent]{.underline} [observations]{.underline} and [lack]{.underline} [of]{.underline} [multicollinearity]{.underline} between explanatory variables. Independent observations is the assumption that each pitch triplet is stand-alone, that is, one triplet does not affect another. Multicollinearity is the presence of dependence between predictor variables, that is, an increase in one predictor variable is closely linked to an increase in another predictor variable. We will not dive into assessing these assumptions to determine if the model fits the validity conditions, but will instead assume them to be true.\n\nThe following equation is the general form for logistic regression. On the right is the linear form of the equation and on the left is the natural log of the odds. Odds are defined as the probability of an event happening divided by the probability of the event not happening.\n\n$$ln(\\frac{\\pi}{1-\\pi}) = \\beta_0 + \\beta_1 x_1 + ... + \\beta_{p} x_{p}$$\n\nWe will use logistic regression to **assess what sequences have the greatest effect on success probability** by representing pitch pairs as individual variables in the model. We are not factoring in the third pitch type simply because it would be at risk of the imbalanced sample sizes we discovered previously. Additionally, including 3-pitch sequences would add 27 total variables to the model, making it harder to interpret. The following approach allows for only 9 (8 dummy varibales) related to pitch sequence. We will see what pitch pairs have the greatest effect on the success of the third pitch, regardless of what that pitch type is.\n\n::: {.callout-note collapse=\"true\" title=\"**Discussion Questions**\" appearance=\"minimal\"}\n-   Would linear regression make sense in this context over logistic regression? What are their differences? Think about the responses of the models, how do they differ?\n\nFor more information visit: <https://www.statology.org/assumptions-of-logistic-regression/>\n:::\n\nFirst, we essentially copied code from previous \"three_pitch_seq_suc\" and removed the select function at the end so that we have all variables at our disposal. We then created a new variable, \"sequence_pair\".\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nthree_pitch_seq_suc_full <- pitch_seq %>%\n  group_by(game_pk, at_bat_number) %>%\n  mutate(\n    first_pitch = lag(pitch_category, 2),\n    second_pitch = lag(pitch_category, 1),\n    third_pitch = pitch_category,\n    success_3 = success\n  ) %>%\n  ungroup()%>%\n  filter(!is.na(first_pitch))\n\nsequences <- three_pitch_seq_suc_full %>%\n  mutate(sequence_pair = paste(first_pitch, second_pitch, sep = \"+\"))\n```\n:::\n\n\n\n\n[Note]{.underline}: Logistic regression is susceptible to class imbalances. The following output shows the counts for successes and failures in our data. We are pretty well balanced, with 45.1% of the sequences being successes.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsequences %>% group_by(success_3) %>% count()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 2\n# Groups:   success_3 [2]\n  success_3      n\n      <dbl>  <int>\n1         0 199122\n2         1 163629\n```\n\n\n:::\n:::\n\n\n\n\nIn our logistic regression, we include other variables, such as `balls`, `strikes`, and `outs_when_up` to account for the situation. We expect these factors to have significant confounding effects on pitch success. Logistic regression accounts for this by establishing a base class to the compare the effect individual variables have, holding all other variables constant.\n\nThe variables `balls`, `strikes`, and `outs_when_up` will not need any modification to be put into our model. The ball position, however, will need to be modified as it is not expected to have a monotonic effect on success probability. That is to say, the success of a pitch does not steadily increase as a pitch moves up or to the side. Currently, the data measures the pitch location in reference to the middle of the plate in the dirt. To account for this, we will change the `plate_x` and `plate_z` variables to represent the distance a ball is from the center of the strike zone. Now we can claim that the probability of success of a pitch steadily decreases as pitch moves away from the center of the strike zone.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglm_model <- glm(\n  success_3 ~ sequence_pair + \n    abs(plate_x) + abs(2.55 - plate_z) +\n    balls + strikes + outs_when_up,\n  data = sequences,\n  family = binomial\n)\n\nsummary(glm_model)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nglm(formula = success_3 ~ sequence_pair + abs(plate_x) + abs(2.55 - \n    plate_z) + balls + strikes + outs_when_up, family = binomial, \n    data = sequences)\n\nCoefficients:\n                                      Estimate Std. Error  z value Pr(>|z|)    \n(Intercept)                           1.340189   0.017660   75.887  < 2e-16 ***\nsequence_pairBreaking Ball+Fastball  -0.026619   0.013875   -1.918 0.055056 .  \nsequence_pairBreaking Ball+Off-Speed -0.059427   0.021723   -2.736 0.006226 ** \nsequence_pairFastball+Breaking Ball   0.008154   0.013666    0.597 0.550704    \nsequence_pairFastball+Fastball       -0.034214   0.012165   -2.813 0.004915 ** \nsequence_pairFastball+Off-Speed      -0.046729   0.016405   -2.848 0.004393 ** \nsequence_pairOff-Speed+Breaking Ball -0.037183   0.025612   -1.452 0.146559    \nsequence_pairOff-Speed+Fastball      -0.064902   0.017403   -3.729 0.000192 ***\nsequence_pairOff-Speed+Off-Speed     -0.096157   0.020848   -4.612 3.98e-06 ***\nabs(plate_x)                         -1.222598   0.008091 -151.108  < 2e-16 ***\nabs(2.55 - plate_z)                  -0.856325   0.006494 -131.872  < 2e-16 ***\nballs                                 0.023093   0.004100    5.632 1.78e-08 ***\nstrikes                              -0.065135   0.005712  -11.402  < 2e-16 ***\nouts_when_up                          0.024840   0.004388    5.660 1.51e-08 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 499401  on 362750  degrees of freedom\nResidual deviance: 446956  on 362737  degrees of freedom\nAIC: 446984\n\nNumber of Fisher Scoring iterations: 4\n```\n\n\n:::\n:::\n\n\n\n\n[Note]{.underline}: The base pair in this model is Breaking Ball + Breaking Ball. This means that the coefficients provided correspond to the change in the success of that pitch pair.\n\nOur logistic regression output shows the ball positioning as well as many of the sequences to be significant in predicting the success of the next pitch. The most significant sequence variable in our model was `Off-Speed+Off-Speed`.\n\nThe coefficient for the `Off-Speed+Off-Speed` sequence can be interpreted as follows: using a Off-Speed + Off-Speed pair rather than a Breaking Ball + Breaking Ball pair decreases the log odds of the third pitch being a success by `0.096`.\n\n::: {.callout-note title=\"**Question:**\" appearance=\"minimal\"}\nHow can we change this value of the log odds to be more easily interpreted?\n:::\n\n::: {.callout-note collapse=\"true\" title=\"**Answer:**\" appearance=\"minimal\"}\n-   We can assess how the odds of success changes when throwing a Off-Speed Off-Speed pair using the odds ratio determined from this coefficient.\n\nThis can be done by simply transforming from log‐odds to odds via the exponential function on the coefficient:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexp(-0.096157)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.9083214\n```\n\n\n:::\n:::\n\n\n\n\nThis tells us that the **odds of success on the third pitch decrease by roughly 10%** when throwing two Off-Speeds in a row instead of two breaking balls. For this reason, we would want to avoid this pairing!\n:::\n\n::: {.callout-note collapse=\"true\" title=\"**Discussion Questions**\" appearance=\"minimal\"}\n-   Pick a different pitch sequence to repeat and interpret the odds ratio. Does this reflect what we have seen throughout the module?\n-   What would a positive or negative coefficient mean for the odds ratio and its interpretation?\n-   How else could you expand this model to be more robust?\n-   Do you think batter handedness affects the success of pitch sequencing?\n-   What other variables could affect the success of a pitch?\n-   Add in a variable of your choice and interpret the effect it has on third-pitch success.\n:::\n\n# Conclusion\n\nIn this SCORE module, you learned about data cleaning and considerations you need to make when doing so. You learned about transition matrices and expectancy matrices and the information they can provide. You built heat maps to display data. Lastly, you learned how to **predict the success of a pitch** sequence using logistic regression. All of these tools helped you **explain which pitch sequences have the highest success rates** when a pitcher steps up to the mound.\n\nThe sequence of a pitch absolutely matters. The pitcher and the batter are trying to throw each other off to each gain an advantage. Through some extensive statistical techniques, you learned how a pitcher can throw off a batter and rack up outs, ultimately winning more innings and more games.\n\nThis idea of projecting an outcome based on former sequence of decisions can also be applied to other sports. You can analyze and answer questions such as: should we call a run play or a throw play on 1st and 10 in American Football, what play is the most likely to get a open three point shot in basketball based on how my opponent has been playing, and what formation should I run on the soccer pitch to maximize our chances of scoring a goal? The applications of applied statistics and data science are endless in sports. Thanks for learning with us!\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}